import{h as xe,_ as Qe,c as r,o as u,e as s,t as n,z as S,d as f,D as _t,r as c,q as h,s as wt,b as St,y as I,l as De,F as w,f as x,A as ve,C as F,E as pe,M as Ae,I as Ee,n as Ve,p as ye,k as Ct,w as Te}from"./index-dxBmIVsU.js";import{f as Dt}from"./hostAccommodation-BxlvT3RC.js";import{e as xt,a as Mt,b as $t,g as U,d as Lt,h as Nt}from"./formatters-BE-0ymhR.js";import{H as It}from"./HostGateNotice-DhRiT2ZC.js";async function He(v={}){return xe("/host/booking",v)}async function Rt(v){return xe("/host/booking",{month:v,class:"calendar"})}async function Ot(v){return xe("/refunds/quote",{reservationId:v})}const Bt={class:"card-top"},Ft={class:"muted"},Pt={class:"card-tags"},zt={class:"property"},At={class:"period"},Et={class:"period-meta"},Vt={class:"amount"},Tt={__name:"ReservationCard",props:{booking:{type:Object,required:!0},primaryLabel:{type:String,default:""},primaryClass:{type:String,default:""},secondaryLabel:{type:String,default:""},secondaryClass:{type:String,default:""},scheduleRange:{type:String,default:""},scheduleMeta:{type:String,default:""},amountLabel:{type:String,default:""},animationDelay:{type:String,default:""}},emits:["detail"],setup(v,{emit:R}){const j=v,P=R,C=()=>{P("detail",j.booking)};return(V,T)=>(u(),r("article",{class:"mobile-card reservation-card fade-item",style:_t(v.animationDelay?{animationDelay:v.animationDelay}:void 0)},[s("div",Bt,[s("div",null,[s("p",Ft,"#"+n(v.booking.id?v.booking.id.toString().padStart(4,"0"):"-"),1),s("h3",null,n(v.booking.guestName||"-"),1)]),s("span",{class:S(["pill",v.primaryClass])},n(v.primaryLabel),3)]),s("div",Pt,[v.secondaryLabel?(u(),r("span",{key:0,class:S(["transaction-chip",v.secondaryClass])},n(v.secondaryLabel),3)):f("",!0)]),s("p",zt,n(v.booking.property||"-"),1),s("p",At,n(v.scheduleRange),1),s("p",Et,n(v.scheduleMeta),1),s("p",Vt,n(v.amountLabel),1),s("button",{class:"ghost-btn detail-btn","aria-label":"예약 상세",onClick:C},[...T[0]||(T[0]=[s("span",{class:"detail-btn__text"},null,-1)])])],4))}},Ye=Qe(Tt,[["__scopeId","data-v-92fa8a8e"]]),Ht={class:"booking-page"},Yt={class:"host-view-header"},Qt={class:"host-subtitle"},Ut={class:"tab-switch host-view-header__actions",role:"tablist","aria-label":"예약 보기 전환"},jt=["aria-selected","aria-pressed"],Kt=["aria-selected","aria-pressed"],Gt={key:0,class:"list-section"},qt={class:"filter-summary"},Jt={class:"filter-summary__text"},Wt={class:"filters-desktop"},Xt={class:"range-row"},Zt={class:"filter-chips"},ea=["onClick"],ta={key:0,class:"range-custom"},aa={class:"filter-row"},sa={class:"filter-chips"},la=["onClick"],na={class:"past-toggle"},oa=["disabled"],ua=["value"],ra={key:0,class:"filter-sheet",role:"dialog","aria-modal":"true"},ia={class:"sheet-panel"},ca={class:"sheet-head"},da={class:"sheet-body"},va={class:"sheet-section"},pa={class:"filter-chips"},ya=["onClick"],ma={key:0,class:"range-custom"},ha={class:"sheet-section"},fa={class:"filter-chips"},ga=["onClick"],ba={class:"sheet-section sheet-row"},ka={class:"past-toggle"},_a=["disabled"],wa=["value"],Sa={key:1,class:"empty-box"},Ca={class:"mobile-cards"},Da={key:0,class:"empty-box"},xa=["disabled"],Ma={class:"table-wrap"},$a={class:"booking-table"},La=["title"],Na=["title"],Ia={class:"nowrap-cell cell-right"},Ra={class:"strong cell-right"},Oa={class:"status-col status-cell"},Ba={class:"status-stack"},Fa={class:"cell-right"},Pa=["onClick"],za={key:0,class:"table-pagination"},Aa=["disabled"],Ea={class:"muted"},Va=["disabled"],Ta={key:1,class:"calendar-section"},Ha={class:"calendar"},Ya={class:"cal-head"},Qa={class:"calendar-legend"},Ua={class:"weekdays"},ja={class:"grid"},Ka=["onClick","onKeydown","role","tabindex"],Ga={key:0,class:"day"},qa={key:1,class:"count-chip"},Ja={class:"count-number"},Wa={class:"date-panel"},Xa={key:0,class:"empty-box"},Za={key:1,class:"date-list"},es={key:2,class:"empty-box"},ts={key:2,class:"empty-box"},as={class:"modal"},ss={class:"modal-head"},ls={class:"muted"},ns={class:"modal-body"},os={class:"modal-row"},us={class:"modal-row"},rs={class:"modal-row"},is={class:"modal-row"},cs={class:"modal-row"},ds={class:"modal-row"},vs={class:"modal-row"},ps={class:"modal-row"},ys={class:"modal-row"},ms={class:"modal-row"},hs={__name:"HostBookingView",setup(v){const R=c([]),j=c([]),P=c(!1),C=c(""),V=c(!1),T=c(20),L=c(0),H=c(0),ae=c(0),Y=c(null),K=c(!1),G=c(!1),q=c({hostState:"loading",counts:{total:0,approved:0,pending:0,rejected:0,unknown:0},rejectedReason:"",recheckReason:""}),Ue=h(()=>q.value.hostState),Q=h(()=>q.value.gateState==="APPROVED"),je=h(()=>!Q.value&&Ue.value!=="loading"),z=h(()=>xt(q.value)),Me={요청:"badge-gray",확정:"badge-green","체크인 완료":"badge-outline",취소:"badge-red"},$e={0:"결제 대기",1:"결제 완료",2:"결제 실패"},Ke={0:"환불 요청",1:"환불 완료",2:"환불 실패"},J=wt(),se=Ct(),O=h(()=>J.query.view==="calendar"?"calendar":"list"),m=c(null),g=c(null),me=c(!1),W=c(!1),X=c(""),A=c(null),_=c(!1),le=c(!1),ne=t=>{const e=t?new Date(t):new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},B=c(ne(new Date)),i=c("upcoming"),b=c({start:"",end:""}),he=[{value:"upcoming",label:"예정/진행"},{value:"today",label:"오늘"},{value:"tomorrow",label:"내일"},{value:"7days",label:"7일"},{value:"30days",label:"30일"},{value:"custom",label:"기간선택"}],p=c(new Date),Z=[{value:"all",label:"전체",statuses:[1,2,3,9]},{value:"pending",label:"요청",statuses:[1]},{value:"confirmed",label:"확정",statuses:[2]},{value:"checkin",label:"체크인 완료",statuses:[3]},{value:"canceled",label:"취소",statuses:[9]}],oe=[{value:"latest",label:"최신순"},{value:"checkin",label:"체크인 임박순"},{value:"checkout",label:"체크아웃 임박순"}],M=c("all"),y=c("latest"),Ge=h(()=>ae.value>0?ae.value:ce.value.length),fe=(t,e,a="-")=>t.find(o=>o.value===e)?.label??a,qe=h(()=>{const t=i.value==="upcoming"?"오늘~미래":fe(he,i.value),e=_.value?"전체 일정":"예정/진행",a=fe(Z,M.value),l=fe(oe,y.value);return`${e} · ${t} · ${a} · ${l}`}),Je=h(()=>new Date(p.value.getFullYear(),p.value.getMonth()+1,0).getDate()),We=h(()=>new Date(p.value.getFullYear(),p.value.getMonth(),1).getDay()),N=t=>{if(!t)return null;const e=new Date(t);return Number.isNaN(e.getTime())?null:e},Xe=(t,e=!1)=>{const a=U(t.checkIn,e),l=U(t.checkOut,e);let o=t.stayNights??0;if(!o){const d=N(t.checkIn),D=N(t.checkOut);if(d&&D){const de=new Date(d.getFullYear(),d.getMonth(),d.getDate()),bt=new Date(D.getFullYear(),D.getMonth(),D.getDate()),kt=Math.round((bt-de)/(1e3*60*60*24));o=Math.max(1,kt)}}return`${a} → ${l} · ${o}박`},Ze=(t,e=!1)=>Nt(t.checkIn,t.checkOut,e),Le=t=>{let e=t.stayNights??0;if(!e||e<=0){const a=N(t.checkIn),l=N(t.checkOut);if(a&&l){const o=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(l.getFullYear(),l.getMonth(),l.getDate()),D=Math.round((d-o)/(1e3*60*60*24));e=Math.max(1,D)}else e=1}return`${e}박 · ${t.guests}명`},et=t=>{const e=N(t);return e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):null},ee=()=>ne(new Date),tt=h(()=>{const t=[];for(let e=0;e<We.value;e++)t.push({empty:!0});for(let e=1;e<=Je.value;e++){const a=new Date(p.value.getFullYear(),p.value.getMonth(),e),l=a.toISOString().split("T")[0],o=j.value.filter(d=>{if(d.reservationStatus===0)return!1;const D=N(d.checkIn),de=N(d.checkOut);return D&&de&&a>=D&&a<=de}).length;t.push({empty:!1,day:e,dateStr:l,count:o})}return t}),Ne=h(()=>{if(!m.value)return[];const t=new Date(p.value.getFullYear(),p.value.getMonth(),m.value);return j.value.filter(e=>{if(e.reservationStatus===0)return!1;const a=N(e.checkIn),l=N(e.checkOut);return a&&l&&t>=a&&t<=l})}),at=h(()=>{if(!m.value)return"";const t=new Date(p.value.getFullYear(),p.value.getMonth(),m.value);return Mt(t,!0)}),st=()=>{p.value=new Date(p.value.getFullYear(),p.value.getMonth()-1,1),m.value=null},lt=()=>{p.value=new Date(p.value.getFullYear(),p.value.getMonth()+1,1),m.value=null},te=t=>$t(t),ge=t=>{g.value=t,me.value=!0,nt(t?.id)},Ie=()=>{me.value=!1,W.value=!1,X.value="",A.value=null},nt=async t=>{if(!t)return;W.value=!0,X.value="";const e=await Ot(t);e.ok&&e.data?A.value=e.data:X.value=e?.data?.message||"환불 계산 불가",W.value=!1},ot=h(()=>{if(W.value)return"계산 중...";if(X.value)return"계산 불가";if(!A.value)return"-";const t=Number(A.value.daysBefore),e=Number.isFinite(t)?`D-${t}`:"-";return`${A.value.refundRate}% (${e})`}),ut=h(()=>W.value?"계산 중...":X.value||!A.value?"-":te(A.value.refundAmount)),rt=()=>{M.value="all",y.value="latest",_.value=!1,i.value="upcoming",b.value={start:"",end:""},B.value=ee()},it=t=>{const e=Number(t);if(e===1)return"요청";if(e===2)return"확정";if(e===3)return"체크인 완료";if(e===9)return"취소";const a=String(t??"").toLowerCase();return a.includes("확정")||a==="confirmed"?"확정":a.includes("요청")||a.includes("대기")||a==="pending"?"요청":a.includes("체크인")?"체크인 완료":a.includes("취소")||a==="cancelled"?"취소":"요청"},ue=t=>{const e=Number(t);return Number.isFinite(e)?e:null},ct=(t,e)=>{const l=e===0||e===1||e===2?9:t;return{code:l,label:it(l)}},k=t=>{const e=t.status,a=Me[t.status],l=t.bookingStatusCode===9||t.status==="취소";let o="",d="";return l?t.paymentStatus===1&&t.refundStatus!==null&&t.refundStatus!==void 0?(o=Ke[t.refundStatus],d="transaction-chip--refund"):t.paymentStatus===0?(o="결제 취소",d="transaction-chip--warn"):t.paymentStatus===2&&(o=$e[t.paymentStatus]??"결제 실패",d="transaction-chip--failed"):(o=$e[t.paymentStatus]??"결제 대기",t.paymentStatus===1?d="transaction-chip--paid":t.paymentStatus===2?d="transaction-chip--failed":d="transaction-chip--pending"),{primaryLabel:e,primaryClass:a,secondaryLabel:o,secondaryClass:d}},be=t=>{const e=ue(t.reservationStatus??t.status),a=ue(t.paymentStatus??t.paymentStatusCode??t.payment),l=ue(t.refundStatus??t.refund_status),o=ct(e,l);return{id:t.bookingId??t.reservationId??t.id,reservationStatus:e,bookingStatusCode:o.code,bookingStatusLabel:o.label,paymentStatus:a,refundStatus:l,guestName:t.guestName??t.reserverName??t.name??"",guestPhone:t.guestPhone??t.reserverPhone??t.phone??"",guestEmail:t.guestEmail??t.email??"",property:t.accommodationName??t.property??"",checkIn:t.checkin??t.checkIn??"",checkOut:t.checkout??t.checkOut??"",guests:t.guestCount??t.guests??0,stayNights:ue(t.stayNights??t.stayNightsCount),amount:t.finalPaymentAmount??t.amount??t.totalAmount??0,status:o.label,createdAt:t.createdAt??t.created_at??""}},dt=t=>{const e=String(t??"").toLowerCase();return e==="checkinsoon"||e==="checkin"?"checkin":e==="checkoutsoon"||e==="checkout"?"checkout":e==="latest"?"latest":null},Re=t=>{const e=String(t??"").toLowerCase();if(!e)return null;const a=Z.find(l=>l.value===e);return a?a.value:e.includes("confirm")?"confirmed":e.includes("checkin")?"checkin":e.includes("cancel")?"canceled":e.includes("request")||e.includes("pending")?"pending":null},vt=t=>{const e=String(t??"").toLowerCase();return e==="1"||e==="true"||e==="yes"},pt=t=>String(t??"").toLowerCase()==="today"?"today":null,yt=t=>{const e=String(t??"").toLowerCase();return e==="upcoming"||e==="today"||e==="tomorrow"||e==="7days"||e==="30days"||e==="custom"?e:null},re=t=>{if(!t)return null;const e=new Date(t);return Number.isNaN(e.getTime())?null:ne(e)},ie=t=>{if(!t)return null;const e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${e}-${a}-${l}`},ke=(t,e)=>{const a=new Date(t);return a.setDate(a.getDate()+e),ne(a)},mt=()=>{const t=B.value;if(i.value==="today")return{start:t,end:t};if(i.value==="tomorrow"){const e=ke(t,1);return{start:e,end:e}}if(i.value==="7days")return{start:t,end:ke(t,6)};if(i.value==="30days")return{start:t,end:ke(t,29)};if(i.value==="custom"){const e=re(b.value.start),a=re(b.value.end);return{start:e,end:a}}return{start:null,end:null}},Oe=()=>{if(i.value==="upcoming")return _.value?{}:{upcomingOnly:!0,startDate:ie(B.value)};const{start:t,end:e}=mt();return!t||!e?null:{startDate:ie(t),endDate:ie(e)}},Be=()=>y.value==="latest"?i.value!=="upcoming"||!_.value?"CHECKIN_ASC":"CREATED_DESC":(y.value==="checkin"||y.value==="checkout","CHECKIN_ASC"),_e=t=>{if(Array.isArray(t))return{items:t,meta:null};const e=t?.items??t?.content??t?.data??[],a=t?.meta??null;return{items:e,meta:a}},E=()=>{L.value=0,H.value=0,ae.value=0,Y.value=null,K.value=!1},ce=h(()=>{const t=R.value.filter(o=>o.bookingStatusCode!==0),e=Z.find(o=>o.value===M.value);let a=e?t.filter(o=>e.statuses.includes(o.bookingStatusCode)):t;const l=ee().getTime();return i.value==="upcoming"&&!_.value&&(a=a.filter(o=>{const d=et(o.checkIn);return d?d.getTime()>=l:!0})),a}),ht=h(()=>"표시된 건수는 해당 날짜에 포함된 예약 수입니다."),$=async()=>{if(!Q.value)return;const t=Oe();if(t===null){R.value=[],C.value="",P.value=!1;return}P.value=!0,C.value="";const e={...t,sort:Be(),rangeMode:"OVERLAP"};V.value&&(e.page=L.value),e.size=T.value;const a=await He(e);if(a.ok){const{items:l,meta:o}=_e(a.data);R.value=l.map(be),o?.pageInfo&&(H.value=o.pageInfo.totalPages??0,ae.value=o.pageInfo.totalElements??0),o?.cursorInfo?(Y.value=o.cursorInfo.nextCursor??null,K.value=!!o.cursorInfo.hasNext):(Y.value=null,K.value=!1)}else C.value="예약 목록을 불러오지 못했습니다.";P.value=!1},ft=async()=>{if(!Q.value||G.value||!Y.value)return;const t=Oe();if(t===null)return;G.value=!0,C.value="";const e=await He({...t,sort:Be(),rangeMode:"OVERLAP",size:T.value,cursor:Y.value});if(e.ok){const{items:a,meta:l}=_e(e.data);R.value=[...R.value,...a.map(be)],l?.cursorInfo&&(Y.value=l.cursorInfo.nextCursor??null,K.value=!!l.cursorInfo.hasNext)}else C.value="예약 목록을 불러오지 못했습니다.";G.value=!1},Fe=t=>{const e=Math.max(0,H.value-1),a=Math.min(Math.max(0,t),e);a!==L.value&&(L.value=a,$())},we=async t=>{if(!Q.value)return;const e=await Rt(t);if(e.ok){const{items:a}=_e(e.data);j.value=a.map(be)}else C.value="예약 캘린더를 불러오지 못했습니다."},Se=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,gt=async()=>{const t=await Dt();if(t.ok){const e=t.data,a=Array.isArray(e)?e:e?.items??e?.content??e?.data??[];q.value=Lt(a)}else q.value={hostState:"empty",counts:{total:0,approved:0,pending:0,rejected:0,unknown:0},rejectedReason:"",recheckReason:""}};St(async()=>{if(typeof window<"u"){const t=window.matchMedia("(min-width: 768px)"),e=()=>{V.value=t.matches};e(),t.addEventListener?.("change",e),t.addListener?.(e)}i.value==="upcoming"&&!_.value&&(y.value="checkin"),await gt(),Q.value&&(await $(),await we(Se(p.value)))}),I(p,t=>{m.value=null,Q.value&&we(Se(t))}),I(()=>J.query,t=>{if(!t.view){se.replace({query:{...t,view:"list"}});return}const e=yt(t.range);e&&(i.value=e);const a=dt(t.sort);a&&(y.value=a);const l=Re(t.type);l&&(M.value=l);const o=Re(t.status);if(o&&(M.value=o),_.value=vt(t.includePast),pt(t.mode)==="today"||e==="today"){i.value="today";const D=re(t.date)??ee();B.value=D}else!t.mode&&!t.range&&i.value==="today"?(i.value="upcoming",B.value=ee()):e&&["tomorrow","7days","30days"].includes(e)&&(B.value=re(t.date)??ee())},{immediate:!0});const Ce=t=>{const e=J.query,a={...e,...t};Object.keys(a).every(d=>String(a[d]??"")===String(e[d]??""))||se.replace({query:a})},Pe=()=>{const t={...J.query};t.range=i.value,["today","tomorrow","7days","30days"].includes(i.value)?t.date=ie(B.value):delete t.date,delete t.mode,se.replace({query:t})};I(M,t=>{Ce({status:t,type:t}),E(),$()}),I(y,t=>{Ce({sort:t}),E(),$()}),I(_,t=>{Ce({includePast:t?1:0}),E(),!t&&y.value==="latest"&&(y.value="checkin"),$()}),I(i,()=>{i.value!=="custom"&&(b.value={start:"",end:""}),i.value!=="upcoming"&&y.value==="latest"&&(y.value="checkin"),E(),Pe(),$()}),I(B,()=>{E(),Pe(),$()}),I(()=>({...b.value}),()=>{i.value==="custom"&&(E(),$())}),I(V,()=>{E(),$()});const ze=t=>{t!==O.value&&se.replace({query:{...J.query,view:t}})};return(t,e)=>(u(),r("div",Ht,[je.value?(u(),De(It,{key:0,title:z.value.title,description:z.value.description,reason:z.value.reason,"primary-text":z.value.primaryText,"primary-to":z.value.primaryTo,"secondary-text":z.value.secondaryText,"secondary-to":z.value.secondaryTo},null,8,["title","description","reason","primary-text","primary-to","secondary-text","secondary-to"])):(u(),r(w,{key:1},[s("header",Yt,[s("div",null,[e[17]||(e[17]=s("h2",{class:"host-title"},"예약 관리",-1)),s("p",Qt,"총 "+n(Ge.value)+"건 · "+n(oe.find(a=>a.value===y.value)?.label),1)]),s("div",Ut,[s("button",{class:S(["tab-btn host-chip",{"host-chip--active":O.value==="list"}]),role:"tab","aria-selected":O.value==="list","aria-pressed":O.value==="list",type:"button",onClick:e[0]||(e[0]=a=>ze("list"))}," 목록 ",10,jt),s("button",{class:S(["tab-btn host-chip",{"host-chip--active":O.value==="calendar"}]),role:"tab","aria-selected":O.value==="calendar","aria-pressed":O.value==="calendar",type:"button",onClick:e[1]||(e[1]=a=>ze("calendar"))}," 캘린더 ",10,Kt)])]),O.value==="list"?(u(),r("section",Gt,[s("div",qt,[s("span",Jt,n(qe.value),1),s("button",{class:"ghost-btn filter-open",type:"button",onClick:e[2]||(e[2]=a=>le.value=!0)},"필터")]),s("div",Wt,[s("div",Xt,[s("div",Zt,[(u(),r(w,null,x(he,a=>s("button",{key:a.value,class:S(["filter-chip host-chip",{"host-chip--active":i.value===a.value}]),type:"button",onClick:l=>i.value=a.value},n(a.label),11,ea)),64))]),i.value==="custom"?(u(),r("div",ta,[s("label",null,[e[18]||(e[18]=ve(" 시작일 ",-1)),F(s("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>b.value.start=a),type:"date"},null,512),[[pe,b.value.start]])]),s("label",null,[e[19]||(e[19]=ve(" 종료일 ",-1)),F(s("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>b.value.end=a),type:"date"},null,512),[[pe,b.value.end]])])])):f("",!0)]),s("div",aa,[s("div",sa,[(u(),r(w,null,x(Z,a=>s("button",{key:a.value,class:S(["filter-chip host-chip",{"host-chip--active":M.value===a.value}]),type:"button",onClick:l=>M.value=a.value},n(a.label),11,la)),64))]),s("label",na,[F(s("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>_.value=a),type:"checkbox",disabled:i.value!=="upcoming"},null,8,oa),[[Ae,_.value]]),e[20]||(e[20]=s("span",null,"지난 일정 포함",-1))]),F(s("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>y.value=a),class:"sort-select","aria-label":"정렬 선택"},[(u(),r(w,null,x(oe,a=>s("option",{key:a.value,value:a.value},n(a.label),9,ua)),64))],512),[[Ee,y.value]])])]),le.value?(u(),r("div",ra,[s("button",{class:"sheet-backdrop",type:"button","aria-label":"필터 닫기",onClick:e[7]||(e[7]=a=>le.value=!1)}),s("div",ia,[s("div",ca,[e[21]||(e[21]=s("h3",null,"필터",-1)),s("button",{class:"ghost-btn sheet-close",type:"button",onClick:e[8]||(e[8]=a=>le.value=!1)},"닫기")]),s("div",da,[s("div",va,[e[24]||(e[24]=s("p",{class:"sheet-title"},"기간",-1)),s("div",pa,[(u(),r(w,null,x(he,a=>s("button",{key:a.value,class:S(["filter-chip host-chip",{"host-chip--active":i.value===a.value}]),type:"button",onClick:l=>i.value=a.value},n(a.label),11,ya)),64))]),i.value==="custom"?(u(),r("div",ma,[s("label",null,[e[22]||(e[22]=ve(" 시작일 ",-1)),F(s("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>b.value.start=a),type:"date"},null,512),[[pe,b.value.start]])]),s("label",null,[e[23]||(e[23]=ve(" 종료일 ",-1)),F(s("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>b.value.end=a),type:"date"},null,512),[[pe,b.value.end]])])])):f("",!0)]),s("div",ha,[e[25]||(e[25]=s("p",{class:"sheet-title"},"상태",-1)),s("div",fa,[(u(),r(w,null,x(Z,a=>s("button",{key:a.value,class:S(["filter-chip host-chip",{"host-chip--active":M.value===a.value}]),type:"button",onClick:l=>M.value=a.value},n(a.label),11,ga)),64))])]),s("div",ba,[s("label",ka,[F(s("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>_.value=a),type:"checkbox",disabled:i.value!=="upcoming"},null,8,_a),[[Ae,_.value]]),e[26]||(e[26]=s("span",null,"지난 일정 포함",-1))]),F(s("select",{"onUpdate:modelValue":e[12]||(e[12]=a=>y.value=a),class:"sort-select","aria-label":"정렬 선택"},[(u(),r(w,null,x(oe,a=>s("option",{key:a.value,value:a.value},n(a.label),9,wa)),64))],512),[[Ee,y.value]])])])])])):f("",!0),C.value?(u(),r("div",Sa,[e[27]||(e[27]=s("p",null,"데이터를 불러오지 못했어요.",-1)),s("button",{class:"ghost-btn",onClick:$},"다시 시도")])):f("",!0),s("div",Ca,[!C.value&&!ce.value.length&&!P.value?(u(),r("div",Da,[e[28]||(e[28]=s("p",null,"조건에 맞는 예약이 없습니다.",-1)),s("button",{class:"ghost-btn",onClick:rt},"필터 초기화")])):f("",!0),(u(!0),r(w,null,x(ce.value,(a,l)=>(u(),De(Ye,{key:a.id,booking:a,"primary-label":k(a).primaryLabel,"primary-class":k(a).primaryClass,"secondary-label":k(a).secondaryLabel,"secondary-class":k(a).secondaryClass,"schedule-range":Ze(a),"schedule-meta":Le(a),"amount-label":te(a.amount),"animation-delay":`${Math.min(l,5)*70}ms`,onDetail:ge},null,8,["booking","primary-label","primary-class","secondary-label","secondary-class","schedule-range","schedule-meta","amount-label","animation-delay"]))),128)),K.value&&!V.value?(u(),r("button",{key:1,class:"ghost-btn load-more",type:"button",disabled:G.value,onClick:ft},n(G.value?"불러오는 중...":"더보기"),9,xa)):f("",!0)]),s("div",Ma,[s("table",$a,[e[30]||(e[30]=s("colgroup",null,[s("col",{style:{width:"96px"}}),s("col",{style:{width:"160px"}}),s("col",{style:{width:"260px"}}),s("col",{style:{width:"160px"}}),s("col",{style:{width:"160px"}}),s("col",{style:{width:"84px"}}),s("col",{style:{width:"140px"}}),s("col",{style:{width:"120px"}}),s("col",{style:{width:"112px"}})],-1)),e[31]||(e[31]=s("thead",null,[s("tr",null,[s("th",null,"예약번호"),s("th",null,"게스트"),s("th",null,"숙소"),s("th",null,"체크인"),s("th",null,"체크아웃"),s("th",{class:"nowrap-cell"},"인원"),s("th",null,"금액"),s("th",{class:"status-col"},"상태"),s("th")])],-1)),s("tbody",null,[(u(!0),r(w,null,x(ce.value,a=>(u(),r("tr",{key:a.id},[s("td",null,"#"+n(a.id.toString().padStart(4,"0")),1),s("td",{class:"cell-ellipsis",title:a.guestName},n(a.guestName),9,La),s("td",{class:"cell-ellipsis",title:a.property},n(a.property),9,Na),s("td",null,n(ye(U)(a.checkIn)),1),s("td",null,n(ye(U)(a.checkOut)),1),s("td",Ia,n(a.guests)+"명",1),s("td",Ra,n(te(a.amount)),1),s("td",Oa,[s("div",Ba,[s("span",{class:S(["pill",k(a).primaryClass])},n(k(a).primaryLabel),3),k(a).secondaryLabel?(u(),r("span",{key:0,class:S(["transaction-chip",k(a).secondaryClass])},n(k(a).secondaryLabel),3)):f("",!0)])]),s("td",Fa,[s("button",{class:"ghost-btn detail-btn","aria-label":"예약 상세",onClick:l=>ge(a)},[...e[29]||(e[29]=[s("span",{class:"detail-btn__text"},null,-1)])],8,Pa)])]))),128))])]),V.value&&H.value>0?(u(),r("div",za,[s("button",{class:"ghost-btn",type:"button",disabled:L.value===0,onClick:e[13]||(e[13]=a=>Fe(L.value-1))},"이전",8,Aa),s("span",Ea,"페이지 "+n(L.value+1)+" / "+n(H.value),1),s("button",{class:"ghost-btn",type:"button",disabled:L.value>=H.value-1,onClick:e[14]||(e[14]=a=>Fe(L.value+1))},"다음",8,Va)])):f("",!0)])])):(u(),r("section",Ta,[s("div",Ha,[s("div",Ya,[s("h3",null,n(p.value.getFullYear())+"년 "+n(p.value.getMonth()+1)+"월",1),s("div",{class:"cal-nav"},[s("button",{class:"circle-btn",onClick:st},"‹"),s("button",{class:"circle-btn",onClick:lt},"›")])]),s("p",Qa,n(ht.value),1),s("div",Ua,[(u(),r(w,null,x(["일","월","화","수","목","금","토"],a=>s("span",{key:a},n(a),1)),64))]),s("div",ja,[(u(!0),r(w,null,x(tt.value,(a,l)=>(u(),r("div",{key:l,class:S(["cell",{empty:a.empty,selected:!a.empty&&m.value===a.day,"has-booking":!a.empty&&a.count}]),onClick:o=>!a.empty&&(m.value=a.day),onKeydown:[Te(o=>!a.empty&&(m.value=a.day),["enter"]),Te(Ve(o=>!a.empty&&(m.value=a.day),["prevent"]),["space"])],role:a.empty?void 0:"button",tabindex:a.empty?-1:0},[a.empty?f("",!0):(u(),r("span",Ga,n(a.day),1)),!a.empty&&a.count?(u(),r("span",qa,[s("span",Ja,n(a.count),1),e[32]||(e[32]=s("span",{class:"count-unit"},"건",-1))])):f("",!0)],42,Ka))),128))])]),s("div",Wa,[s("h4",null,n(m.value?`${at.value} 예약`:"날짜를 선택하세요"),1),C.value?(u(),r("div",Xa,[e[33]||(e[33]=s("p",null,"데이터를 불러오지 못했어요.",-1)),s("button",{class:"ghost-btn",onClick:e[15]||(e[15]=a=>we(Se(p.value)))},"다시 시도")])):m.value&&Ne.value.length?(u(),r("div",Za,[(u(!0),r(w,null,x(Ne.value,(a,l)=>(u(),De(Ye,{key:a.id,booking:a,"primary-label":k(a).primaryLabel,"primary-class":k(a).primaryClass,"secondary-label":k(a).secondaryLabel,"secondary-class":k(a).secondaryClass,"schedule-range":Xe(a),"schedule-meta":Le(a),"amount-label":te(a.amount),"animation-delay":`${Math.min(l,5)*60}ms`,onDetail:ge},null,8,["booking","primary-label","primary-class","secondary-label","secondary-class","schedule-range","schedule-meta","amount-label","animation-delay"]))),128))])):(u(),r("div",es,[s("p",null,n(m.value?"선택한 날짜에 예약이 없습니다.":"날짜를 선택하세요."),1),m.value?(u(),r("button",{key:0,class:"ghost-btn",onClick:e[16]||(e[16]=a=>m.value=new Date().getDate())},"오늘 보기")):f("",!0)]))])])),P.value?(u(),r("p",ts,"예약 데이터를 불러오는 중입니다.")):f("",!0),me.value&&g.value?(u(),r("div",{key:3,class:"modal-backdrop",onClick:Ve(Ie,["self"])},[s("div",as,[s("header",ss,[s("div",null,[s("p",ls,"예약 #"+n(g.value.id.toString().padStart(4,"0")),1),s("h3",null,n(g.value.guestName),1)]),s("button",{class:"circle-btn",onClick:Ie},"×")]),s("div",ns,[s("div",os,[e[34]||(e[34]=s("span",null,"숙소",-1)),s("strong",null,n(g.value.property),1)]),s("div",us,[e[35]||(e[35]=s("span",null,"체크인",-1)),s("strong",null,n(ye(U)(g.value.checkIn,!0)),1)]),s("div",rs,[e[36]||(e[36]=s("span",null,"체크아웃",-1)),s("strong",null,n(ye(U)(g.value.checkOut,!0)),1)]),s("div",is,[e[37]||(e[37]=s("span",null,"인원",-1)),s("strong",null,n(g.value.guests)+"명",1)]),s("div",cs,[e[38]||(e[38]=s("span",null,"연락처",-1)),s("strong",null,n(g.value.guestPhone),1)]),s("div",ds,[e[39]||(e[39]=s("span",null,"이메일",-1)),s("strong",null,n(g.value.guestEmail),1)]),s("div",vs,[e[40]||(e[40]=s("span",null,"금액",-1)),s("strong",null,n(te(g.value.amount)),1)]),s("div",ps,[e[41]||(e[41]=s("span",null,"환불율",-1)),s("strong",null,n(ot.value),1)]),s("div",ys,[e[42]||(e[42]=s("span",null,"예상 환불액",-1)),s("strong",null,n(ut.value),1)]),s("div",ms,[e[43]||(e[43]=s("span",null,"상태",-1)),s("span",{class:S(["pill",Me[g.value.status]])},n(g.value.status),3)])])])])):f("",!0)],64))]))}},_s=Qe(hs,[["__scopeId","data-v-335746a1"]]);export{_s as default};
