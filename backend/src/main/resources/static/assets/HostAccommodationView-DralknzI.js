import M from"./HostAccommodationRegister-BAJht5pW.js";import{f as F}from"./hostAccommodation-CuGFxgDJ.js";import{_ as G,r as p,q as f,b as H,c as a,l as P,e as o,d as m,t as i,A as v,F as U,f as W,o as n,z as q}from"./index-CetC7qP8.js";const D={class:"accommodation-container"},J={key:1,class:"list-view-wrapper"},K={class:"host-view-header"},O={class:"host-subtitle"},T={key:0,class:"accommodation-list"},Q=["onClick"],X=["src","alt"],Y={class:"card-info"},Z={class:"info-header"},ss=["onClick"],ts={key:0,class:"status-reason"},es={class:"info-details"},os={class:"detail-item"},ns={class:"detail-item"},as={class:"detail-item"},is={class:"price-actions"},rs={class:"price-info"},cs={class:"price"},ls={class:"action-buttons"},us=["onClick"],ds={key:1,class:"empty-state"},ps={key:2,class:"empty-state"},vs={key:3,class:"empty-state"},gs=1440*60*1e3,_s={__name:"HostAccommodationView",setup(hs){const b="http://localhost:8080".replace("/api","")||"",R=s=>s?s.startsWith("blob:")||s.startsWith("http")?s:`${b}${s}`:"https://placehold.co/400x300",g=p("list"),c=p([]),u=p(!1),l=p(""),k=f(()=>c.value.length),y=f(()=>c.value.length>0),w=s=>new Intl.NumberFormat("ko-KR").format(s),C=(s,t,e,r)=>{const d=e?String(e).toLowerCase():"";return s==="rejected"||d==="rejected"?"ë°˜ë ¤":s==="reinspection"||r?"ì¬ê²€í† ì¤‘":s==="pending"||d==="pending"?t?"ì¬ê²€í† ì¤‘":"ê²€ìˆ˜ì¤‘":s==="active"?"ìš´ì˜ì¤‘":s==="inactive"?"ìš´ì˜ì¤‘ì§€":"ìƒíƒœ í™•ì¸"},S=()=>g.value="list",j=s=>{c.value.unshift({id:s.id??Date.now(),status:s.status??"active",...s}),g.value="list"},A=s=>{if(!s)return"inactive";const t=String(s).toLowerCase();return t==="approved"||t==="active"||t==="operating"?"active":t==="reinspection"?"reinspection":t==="pending"||t==="inspection"||t==="review"||t==="reviewing"?"pending":t==="rejected"||t==="reject"||t==="denied"?"rejected":t==="inactive"||t==="stopped"||t==="stop"?"inactive":t},$=()=>{try{const s=sessionStorage.getItem("hostResubmitMap");return s?JSON.parse(s):{}}catch{return{}}},N=s=>{if(!s)return!1;const e=$()[String(s)];return e?Date.now()-Number(e)<=gs:!1},L=s=>{const t=s.accommodationsId??s.accommodationId??s.id,e=s.accommodationsName??s.name??"",r=s.approvalStatus??s.reviewStatus??null,d=s.isResubmitted===1||s.isResubmitted===!0,B=r??s.status??s.accommodationStatus;let _=A(B);const I=s.rejectionReason??s.rejectReason??s.approvalReason??s.reason??"";_==="rejected"&&N(t)&&(_="pending");const x=[s.city,s.district,s.township,s.address].filter(Boolean).join(" "),z=s.maxGuests??s.max_guests??s.maxGuestCount??0,V=s.roomCount??s.roomsCount??s.totalRooms??0,E=s.pricePerNight??s.price??s.roomPrice??0,h=s.images??s.imageUrls??s.imageUrl??[];return{id:t,name:e,status:_,location:x,maxGuests:z,roomCount:V,price:E,images:Array.isArray(h)?h:[h].filter(Boolean),rejectionReason:I,approvalStatus:r,isResubmitted:d}};return H(async()=>{u.value=!0,l.value="";const s=await F();if(s.ok){const t=s.data;console.log("API Response:",t);const e=Array.isArray(t)?t:t?.items??t?.content??t?.data??[];console.log("Raw list:",e),c.value=e.map(L),console.log("Normalized:",c.value)}else l.value="ìˆ™ì†Œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";u.value=!1}),(s,t)=>(n(),a("div",D,[g.value==="register"?(n(),P(M,{key:0,onCancel:S,onSubmit:j})):(n(),a("div",J,[o("div",K,[o("div",null,[t[1]||(t[1]=o("h2",{class:"host-title"},"ìˆ™ì†Œ ê´€ë¦¬",-1)),o("p",O,"ì´ "+i(k.value)+"ê°œì˜ ìˆ™ì†Œ",1)])]),o("button",{class:"register-btn",onClick:t[0]||(t[0]=e=>s.$router.push("/host/accommodation/register"))},[...t[2]||(t[2]=[o("span",{class:"plus-icon"},"+",-1),v(" ìƒˆ ìˆ™ì†Œ ë“±ë¡ ",-1)])]),y.value?(n(),a("div",T,[(n(!0),a(U,null,W(c.value,e=>(n(),a("article",{key:e.id,class:"accommodation-card"},[o("div",{class:"card-image clickable",onClick:r=>s.$router.push(`/room/${e.id}`)},[o("img",{src:R(e.images[0]),alt:e.name},null,8,X)],8,Q),o("div",Y,[o("div",Z,[o("h3",{class:"accommodation-name clickable",onClick:r=>s.$router.push(`/room/${e.id}`)},i(e.name),9,ss),o("span",{class:q(["status-badge",{active:e.status==="active",pending:e.status==="pending",reinspection:e.status==="reinspection"||e.isResubmitted,rejected:e.status==="rejected"||String(e.approvalStatus??"").toLowerCase()==="rejected",inactive:e.status==="inactive"}])},i(C(e.status,e.rejectionReason,e.approvalStatus,e.isResubmitted)),3)]),e.status==="rejected"||String(e.approvalStatus??"").toLowerCase()==="rejected"?(n(),a("p",ts,i(e.rejectionReason?`ë°˜ë ¤ ì‚¬ìœ : ${e.rejectionReason}`:"ë°˜ë ¤ ì‚¬ìœ ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),1)):m("",!0),o("div",es,[o("span",os,[t[3]||(t[3]=o("span",{class:"detail-icon"},"ğŸ“",-1)),v(i(e.location),1)]),o("span",ns,[t[4]||(t[4]=o("span",{class:"detail-icon"},"ğŸ‘¥",-1)),v("ìµœëŒ€ "+i(e.maxGuests)+"ëª…",1)]),o("span",as,[t[5]||(t[5]=o("span",{class:"detail-icon"},"ğŸ›ï¸",-1)),v(i(e.roomCount)+"ê°œ ê°ì‹¤",1)])]),o("div",is,[o("div",rs,[o("span",cs,"â‚©"+i(w(e.price)),1),t[6]||(t[6]=o("span",{class:"price-unit"},"/ë°•",-1))]),o("div",ls,[o("button",{class:"action-btn edit-btn",onClick:r=>s.$router.push(`/host/accommodation/edit/${e.id}`)},"ìˆ˜ì • ",8,us)])])])]))),128))])):!u.value&&!l.value?(n(),a("div",ds,[...t[7]||(t[7]=[o("div",{class:"empty-icon"},"ğŸ ",-1),o("h2",null,"ë“±ë¡ëœ ìˆ™ì†Œê°€ ì—†ìŠµë‹ˆë‹¤",-1),o("p",null,"ìƒˆ ìˆ™ì†Œë¥¼ ë“±ë¡í•˜ì—¬ ê²ŒìŠ¤íŠ¸ë¥¼ ë§ì´í•´ë³´ì„¸ìš”!",-1)])])):u.value?(n(),a("p",ps,"ìˆ™ì†Œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤.")):l.value?(n(),a("p",vs,i(l.value),1)):m("",!0)]))]))}},ks=G(_s,[["__scopeId","data-v-41794a58"]]);export{ks as default};
