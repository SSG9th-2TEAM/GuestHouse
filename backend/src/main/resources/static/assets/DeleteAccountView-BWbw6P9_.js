import{_ as z,r as t,q as w,c as a,e as l,d as r,z as M,F as c,f as D,p as E,k as F,C as V,E as I,n as O,A as g,t as f,O as q,o,M as B}from"./index-D-t2vnuJ.js";import{d as P}from"./userClient-BmQokwXy.js";const j={class:"delete-account-page container"},G={class:"progress-steps"},H={class:"confirmation-box"},J={class:"checkbox-list"},K=["onUpdate:modelValue"],Q={class:"action-buttons"},W=["disabled"],X={class:"reason-box"},Y={class:"reason-list"},Z=["value"],ll={key:0,class:"other-reason-input"},el={class:"action-buttons"},sl=["disabled"],al={class:"modal-content"},ol={class:"modal-actions"},tl=["disabled"],nl={__name:"DeleteAccountView",setup(ul){const y=F(),n=t(1),m=t(!1),k=t(!1),u=t("confirm"),x=t(""),i=t(""),h=t([{id:1,label:"ëª¨ë“  ê°œì¸ì •ë³´ê°€ ì‚­ì œë˜ë©° ë³µêµ¬í•  ìˆ˜ ì—†ìŒì„ ì´í•´í–ˆìŠµë‹ˆë‹¤",checked:!1},{id:2,label:"ì§„í–‰ ì¤‘ì¸ ì˜ˆì•½ì´ ìˆëŠ” ê²½ìš° íƒˆí‡´ê°€ ì œí•œë  ìˆ˜ ìˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤",checked:!1},{id:3,label:"ë³´ìœ  ì¤‘ì¸ ì ë¦½ê¸ˆê³¼ ì¿ í°ì´ ëª¨ë‘ ì†Œë©¸ë¨ì„ ì´í•´í–ˆìŠµë‹ˆë‹¤",checked:!1},{id:4,label:"íƒˆí‡´ í›„ì—ëŠ” ë˜ëŒë¦´ ìˆ˜ ì—†ìœ¼ë©°, ë™ì¼ ê³„ì •ìœ¼ë¡œ ì¬ê°€ì…ì´ í•„ìš”í•¨ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤",checked:!1}]),R=w(()=>h.value.every(d=>d.checked)),S=t([{id:1,label:"ë” ì´ìƒ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì§€ ì•Šì•„ìš”"},{id:2,label:"ì›í•˜ëŠ” ìˆ™ì†Œë¥¼ ì°¾ê¸° ì–´ë ¤ì›Œìš”"},{id:3,label:"ë‹¤ë¥¸ í”Œë«í¼ì´ ë” ì¢‹ì•„ìš”"},{id:4,label:"ê°€ê²©ì´ ë¹„ì‹¸ìš”"},{id:5,label:"ê°œì¸ì •ë³´ ë³´í˜¸ê°€ ê±±ì •ë¼ìš”"},{id:6,label:"ê¸°íƒ€ (ì§ì ‘ ì…ë ¥)"}]),v=t([]),b=t(""),T=w(()=>v.value.includes(6)),A=w(()=>!(v.value.length===0||T.value&&!b.value.trim())),U=()=>{R.value&&(n.value=2)},L=()=>{n.value===2?n.value=1:y.back()},N=()=>{A.value&&(u.value="confirm",k.value=!0)},_=async()=>{m.value=!0,console.log("íšŒì› íƒˆí‡´ ìš”ì²­ ì‹œì‘");try{const d=v.value.map(s=>S.value.find(p=>p.id===s).label);console.log("íƒˆí‡´ ì‚¬ìœ :",d,"ê¸°íƒ€:",b.value);const e=await P(d,b.value);console.log("íƒˆí‡´ API ì‘ë‹µ:",e),e.ok?(console.log("íƒˆí‡´ ì„±ê³µ"),u.value="success"):(console.error("íƒˆí‡´ ì‹¤íŒ¨:",e.status,e.data),u.value="error",x.value="íƒˆí‡´ ì²˜ë¦¬ ì‹¤íŒ¨",e.data&&e.data.message?i.value=e.data.message:e.status===409?i.value="ì§„í–‰ ì¤‘ì´ê±°ë‚˜ ì™„ë£Œëœ ì˜ˆì•½ì´ ìˆì–´ íƒˆí‡´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.":e.status===401?i.value="ë¡œê·¸ì¸ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.":e.status===500?i.value="ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.":i.value=`ì˜¤ë¥˜ ì½”ë“œ: ${e.status}. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.`)}catch(d){console.error("íšŒì› íƒˆí‡´ ì¤‘ ì˜ˆì™¸ ë°œìƒ:",d),u.value="error",x.value="ìš”ì²­ ì‹¤íŒ¨",i.value="ì„œë²„ì™€ í†µì‹ í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."}finally{m.value=!1,console.log("íšŒì› íƒˆí‡´ ìš”ì²­ ì™„ë£Œ")}},C=()=>{k.value=!1},$=()=>{k.value=!1,q(),y.push("/")};return(d,e)=>(o(),a("div",j,[l("div",{class:"page-header"},[l("button",{class:"back-btn",onClick:L},"â†"),e[4]||(e[4]=l("h1",null,"íšŒì› íƒˆí‡´",-1))]),l("div",G,[l("div",{class:M(["step",{active:n.value>=1}])},[...e[5]||(e[5]=[l("span",{class:"step-num"},"1",-1)])],2),l("div",{class:M(["step-line",{active:n.value>=2}])},null,2),l("div",{class:M(["step",{active:n.value>=2}])},[...e[6]||(e[6]=[l("span",{class:"step-num"},"2",-1)])],2)]),e[20]||(e[20]=l("div",{class:"step-labels"},[l("span",null,"ì£¼ì˜ì‚¬í•­ í™•ì¸"),l("span",null,"íƒˆí‡´ ì‚¬ìœ ")],-1)),n.value===1?(o(),a(c,{key:0},[e[9]||(e[9]=l("div",{class:"warning-box"},[l("h3",null,"âš ï¸ íƒˆí‡´ ì „ ê¼­ í™•ì¸í•´ì£¼ì„¸ìš”"),l("p",null,"íšŒì› íƒˆí‡´ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤:"),l("ul",null,[l("li",null,"íšŒì›ë‹˜ì˜ ê°œì¸ì •ë³´ ë° í”„ë¡œí•„ ì •ë³´"),l("li",null,"ì˜ˆì•½ ë‚´ì—­ ë° ë¦¬ë·° (ì§„í–‰ ì¤‘ì¸ ì˜ˆì•½ ì œì™¸)"),l("li",null,"ë³´ìœ í•˜ì‹  ì ë¦½ê¸ˆ ë° ì¿ í°"),l("li",null,"ì°œí•œ ìˆ™ì†Œ ëª©ë¡ ë° í™œë™ ê¸°ë¡")])],-1)),l("div",H,[e[7]||(e[7]=l("h3",null,"íƒˆí‡´ í™•ì¸ ì‚¬í•­",-1)),e[8]||(e[8]=l("p",{class:"sub-text"},"ì•„ë˜ í•­ëª©ì„ ëª¨ë‘ í™•ì¸í•˜ê³  ë™ì˜í•´ì£¼ì„¸ìš”",-1)),l("div",J,[(o(!0),a(c,null,D(h.value,s=>(o(),a("label",{key:s.id,class:"checkbox-row"},[V(l("input",{type:"checkbox","onUpdate:modelValue":p=>s.checked=p},null,8,K),[[B,s.checked]]),l("span",null,f(s.label),1)]))),128))])]),l("div",Q,[l("button",{class:"btn outline",onClick:e[0]||(e[0]=s=>E(y).back())},"ì·¨ì†Œ"),l("button",{class:"btn primary",disabled:!R.value,onClick:U},"ë‹¤ìŒ ë‹¨ê³„",8,W)])],64)):r("",!0),n.value===2?(o(),a(c,{key:1},[l("div",X,[e[10]||(e[10]=l("h3",null,"íƒˆí‡´ ì‚¬ìœ ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”",-1)),e[11]||(e[11]=l("p",{class:"sub-text"},"ë” ë‚˜ì€ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ íƒˆí‡´ ì‚¬ìœ ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤",-1)),l("div",Y,[(o(!0),a(c,null,D(S.value,s=>(o(),a("label",{key:s.id,class:"reason-row"},[V(l("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[1]||(e[1]=p=>v.value=p)},null,8,Z),[[B,v.value]]),l("span",null,f(s.label),1)]))),128))]),T.value?(o(),a("div",ll,[V(l("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>b.value=s),placeholder:"íƒˆí‡´í•˜ì‹œëŠ” êµ¬ì²´ì ì¸ ì´ìœ ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.",rows:"3"},null,512),[[I,b.value]])])):r("",!0)]),e[12]||(e[12]=l("div",{class:"info-box"},[l("h4",null,"ğŸ’¡ ì ê¹ë§Œìš”!"),l("ul",null,[l("li",null,"ê³ ê°ì„¼í„°ë¥¼ í†µí•´ ë¶ˆí¸ ì‚¬í•­ì„ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"),l("li",null,"ì¬ê°€ì… ì‹œ ê¸°ì¡´ í˜œíƒì„ ë‹¤ì‹œ ë°›ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤")])],-1)),l("div",el,[l("button",{class:"btn outline",onClick:e[3]||(e[3]=s=>n.value=1)},"ì´ì „"),l("button",{class:"btn danger",disabled:!A.value,onClick:N},"íšŒì› íƒˆí‡´í•˜ê¸°",8,sl)])],64)):r("",!0),k.value?(o(),a("div",{key:2,class:"modal-overlay",onClick:O(C,["self"])},[l("div",al,[u.value==="confirm"?(o(),a(c,{key:0},[e[13]||(e[13]=l("div",{class:"modal-icon"},"âš ï¸",-1)),e[14]||(e[14]=l("h2",null,"ì •ë§ë¡œ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",-1)),e[15]||(e[15]=l("p",null,[g("íƒˆí‡´ í›„ì—ëŠ” ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ë©°"),l("br"),g("ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")],-1)),l("div",ol,[l("button",{class:"btn outline",onClick:C},"ì·¨ì†Œ"),l("button",{class:"btn danger",onClick:_,disabled:m.value},f(m.value?"ì²˜ë¦¬ ì¤‘...":"íƒˆí‡´í•˜ê¸°"),9,tl)])],64)):r("",!0),u.value==="success"?(o(),a(c,{key:1},[e[16]||(e[16]=l("div",{class:"modal-icon success"},"âœ“",-1)),e[17]||(e[17]=l("h2",null,"íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤",-1)),e[18]||(e[18]=l("p",null,[g("ê·¸ë™ì•ˆ ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤."),l("br"),g("ë” ì¢‹ì€ ì„œë¹„ìŠ¤ë¡œ ë‹¤ì‹œ ë§Œë‚˜ëµ™ê¸¸ ë°”ëë‹ˆë‹¤.")],-1)),l("div",{class:"modal-actions"},[l("button",{class:"btn primary full",onClick:$},"í™ˆìœ¼ë¡œ ì´ë™")])],64)):r("",!0),u.value==="error"?(o(),a(c,{key:2},[e[19]||(e[19]=l("div",{class:"modal-icon error"},"!",-1)),l("h2",null,f(x.value),1),l("p",null,f(i.value),1),l("div",{class:"modal-actions"},[l("button",{class:"btn primary full",onClick:C},"í™•ì¸")])],64)):r("",!0)])])):r("",!0)]))}},rl=z(nl,[["__scopeId","data-v-2ec3fc62"]]);export{rl as default};
