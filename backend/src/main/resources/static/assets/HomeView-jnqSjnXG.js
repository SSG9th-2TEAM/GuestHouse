<<<<<<<< HEAD:backend/src/main/resources/static/assets/HomeView-CWvccdfE.js
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D-t2vnuJ.js","assets/index-9NxybL0H.css"])))=>i.map(i=>d[i]);
import{_ as H,c as i,o as r,a as O,h as Q,r as v,u as Y,b as Z,d as A,e as n,F as w,f as y,t as E,i as I,g as ee,j as te,k as se,l as U,m as V,w as W,n as D,p as G}from"./index-D-t2vnuJ.js";import{G as K}from"./GuesthouseCard-DfeTlGrB.js";import{f as oe,a as ae}from"./theme-4GSdKkXI.js";import{f as ne,a as re}from"./list-CmYDN9Ck.js";import{f as ie,r as ce,a as le}from"./wishlist-V5QVICM-.js";const de="/assets/home-banner-BEw4KG_1.png",ue={class:"skeleton-card"},me={__name:"SkeletonCard",setup(S){return(d,p)=>(r(),i("div",ue,[...p[0]||(p[0]=[O('<div class="skeleton-image shimmer" data-v-81567517></div><div class="skeleton-content" data-v-81567517><div class="skeleton-title shimmer" data-v-81567517></div><div class="skeleton-location shimmer" data-v-81567517></div><div class="skeleton-rating shimmer" data-v-81567517></div><div class="skeleton-price shimmer" data-v-81567517></div></div>',2)])]))}},P=H(me,[["__scopeId","data-v-81567517"]]);async function he(S,d=10){return Q(`/recommendations?userId=${S}&limit=${d}`)}const ve={class:"container main-content"},pe={key:0,class:"theme-section recommendation-section"},fe={class:"row-scroll"},_e={key:1,class:"theme-section skeleton-section"},ge={class:"row-scroll"},ke={key:2,class:"theme-section skeleton-section"},we={class:"row-scroll"},ye={key:3,class:"empty-state"},Ce={class:"section-header"},be=["onClick","onKeydown"],Ae={key:0,class:"row-scroll"},Ie={key:0,class:"row-card more-card"},Se=["onClick"],Te=["aria-label","onClick"],$e=12,Re=8,Ne={__name:"HomeView",setup(S){const d=se(),p=v([]),T=v([]),c=v(new Set),C=v(!1),L=v(!1),f=v(""),$=Y(),M=$e-1,x=e=>{const a=e.accommodationsId??e.accommodationId??e.id,t=e.accommodationsName??e.accommodationName??e.title??"",o=e.shortDescription??e.description??"",m=e.rating??null,h=e.reviewCount??e.review_count??null,b=[e.city,e.district,e.township].filter(Boolean).join(" "),g=Number(e.minPrice??e.price??0),N=e.imageUrl||"https://placehold.co/400x300",s=e.score??null,l=e.matchedThemes??[],u=e.matchedTags??[];return{id:a,title:t,description:o,rating:m,reviewCount:h,location:b,price:g,imageUrl:N,score:s,matchedThemes:l,matchedTags:u}},X=e=>e.slice(0,M),j=e=>e.length>M,R=e=>e?`${e} 게스트하우스 보러가기`:"더 많은 게스트하우스 보러가기",_=e=>{d.push({path:"/list",query:{themeIds:String(e)}})},B=e=>Array.isArray(e)?e:e?.recommendedAccommodations||e?.generalAccommodations?[...e.recommendedAccommodations||[],...e.generalAccommodations||[]]:e?.items??e?.content??e?.data??[],q=async()=>{if(I())try{const e=await ie();e.status===200&&Array.isArray(e.data)&&(c.value=new Set(e.data))}catch(e){console.error("Failed to load wishlist",e)}},F=async e=>{if(!I()){confirm(`로그인이 필요한 서비스입니다.
로그인 페이지로 이동하시겠습니까?`)&&d.push("/login");return}if(c.value.has(e)){c.value.delete(e);try{await ce(e)}catch(t){c.value.add(e),console.error(t)}}else{c.value.add(e);try{await le(e)}catch(t){c.value.delete(e),console.error(t)}}},z=async()=>{C.value=!0,f.value="";try{const e=await oe();if(!e.ok||!Array.isArray(e.data)){f.value="테마 목록을 불러오지 못했습니다.";return}const a=e.data;let t=[];if(I())try{const s=await ae();s.ok&&Array.isArray(s.data)&&(t=s.data)}catch(s){console.warn("Failed to fetch user themes, continuing with all themes:",s)}const o=new Set(t.map(s=>s.id)),m=a.filter(s=>!o.has(s.id)).sort((s,l)=>{const u=Number(s.accommodationCount??0),k=Number(l.accommodationCount??0);return u!==k?k-u:(s.id??0)-(l.id??0)}),h=[...t,...m].slice(0,Re),b=h.map(s=>s.id).filter(Boolean);let g={};if(b.length){const s=await ne(b);s.ok&&s.data&&(g=s.data)}const N=await Promise.all(h.map(async s=>{const l=g?.[s.id]??g?.[String(s.id)];let u=l?B(l):[];if(!l){const k=await re([s.id]);u=k.ok?B(k.data):[]}return{id:s.id,name:s.themeName,items:u.map(x)}}));p.value=N.filter(s=>s.items.length)}catch(e){console.error("Failed to load sections",e),f.value="테마 목록을 불러오지 못했습니다."}finally{C.value=!1}},J=async()=>{if(I()){L.value=!0;try{let e=ee();if(!e){const{getCurrentUser:t}=await te(async()=>{const{getCurrentUser:m}=await import("./index-D-t2vnuJ.js").then(h=>h.al);return{getCurrentUser:m}},__vite__mapDeps([0,1])),o=await t();o.ok&&o.data?.userId&&(e=o.data.userId)}if(!e)return;const a=await he(e,10);a.ok&&a.data?.recommendations&&(T.value=a.data.recommendations.map(x))}catch(e){console.error("Failed to load recommendations",e)}finally{L.value=!1}}};return Z(()=>{$.setKeyword(""),$.resetDates(),$.setGuestCount(1),z(),q(),J()}),(e,a)=>(r(),i("main",ve,[a[4]||(a[4]=O('<div class="bannner" data-v-2d4dcaee><img src="'+de+'" alt="Home banner" class="banner-image" data-v-2d4dcaee><div class="banner-text" data-v-2d4dcaee><h2 class="banner-caption" data-v-2d4dcaee>좋은 사람, 좋은 장소, 좋은 시간</h2><h1 class="banner-title" data-v-2d4dcaee>지금, 이곳</h1></div></div>',1)),T.value.length>0?(r(),i("section",pe,[a[0]||(a[0]=n("div",{class:"section-header"},[n("h2",{class:"section-title recommendation-title"},[n("span",null,"✨ 당신을 위한 맞춤 추천")])],-1)),n("div",fe,[(r(!0),i(w,null,y(T.value,t=>(r(),U(K,{key:t.id,id:t.id,title:t.title,description:t.description,rating:t.rating,"review-count":t.reviewCount,location:t.location,price:t.price,"image-url":t.imageUrl,"is-favorite":c.value.has(t.id),onToggleFavorite:F,onClick:o=>G(d).push(`/room/${t.id}`),class:"row-card"},null,8,["id","title","description","rating","review-count","location","price","image-url","is-favorite","onClick"]))),128))])])):A("",!0),C.value?(r(),i("section",_e,[a[1]||(a[1]=n("div",{class:"section-header"},[n("div",{class:"skeleton-section-title shimmer"})],-1)),n("div",ge,[(r(),i(w,null,y(4,t=>V(P,{key:t})),64))])])):A("",!0),C.value?(r(),i("section",ke,[a[2]||(a[2]=n("div",{class:"section-header"},[n("div",{class:"skeleton-section-title shimmer"})],-1)),n("div",we,[(r(),i(w,null,y(4,t=>V(P,{key:t})),64))])])):f.value?(r(),i("div",ye,E(f.value),1)):(r(!0),i(w,{key:4},y(p.value,t=>(r(),i("section",{key:t.id,class:"theme-section"},[n("div",Ce,[n("h2",{class:"section-title theme-title",role:"button",tabindex:"0",onClick:o=>_(t.id),onKeydown:[W(D(o=>_(t.id),["prevent"]),["enter"]),W(D(o=>_(t.id),["prevent"]),["space"])]},[n("span",null,E(R(t.name)),1),a[3]||(a[3]=n("span",{class:"theme-title-arrow"},"→",-1))],40,be)]),t.items.length?(r(),i("div",Ae,[(r(!0),i(w,null,y(X(t.items),o=>(r(),U(K,{key:o.id,id:o.id,title:o.title,description:o.description,rating:o.rating,"review-count":o.reviewCount,location:o.location,price:o.price,"image-url":o.imageUrl,"is-favorite":c.value.has(o.id),onToggleFavorite:F,onClick:m=>G(d).push(`/room/${o.id}`),class:"row-card"},null,8,["id","title","description","rating","review-count","location","price","image-url","is-favorite","onClick"]))),128)),j(t.items)?(r(),i("div",Ie,[n("button",{type:"button",class:"more-text",onClick:o=>_(t.id)},E(R(t.name)),9,Se),n("button",{type:"button",class:"more-arrow","aria-label":R(t.name),onClick:o=>_(t.id)},"→",8,Te)])):A("",!0)])):A("",!0)]))),128))]))}},Fe=H(Ne,[["__scopeId","data-v-2d4dcaee"]]);export{Fe as default};
========
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CetC7qP8.js","assets/index-pRuQW4dV.css"])))=>i.map(i=>d[i]);
import{_ as H,c as i,o as r,a as O,h as Q,r as v,u as Y,b as Z,d as A,e as n,F as w,f as y,t as E,i as I,g as ee,j as te,k as se,l as U,m as V,w as W,n as D,p as G}from"./index-CetC7qP8.js";import{G as K}from"./GuesthouseCard-CnXLrPJf.js";import{f as oe,a as ae}from"./theme-CWHv2ivI.js";import{f as ne,a as re}from"./list-DwRdNEKU.js";import{f as ie,r as ce,a as le}from"./wishlist-oIhlK_MO.js";const de="/assets/home-banner-BEw4KG_1.png",ue={class:"skeleton-card"},me={__name:"SkeletonCard",setup(S){return(d,f)=>(r(),i("div",ue,[...f[0]||(f[0]=[O('<div class="skeleton-image shimmer" data-v-6777c92f></div><div class="skeleton-content" data-v-6777c92f><div class="skeleton-title shimmer" data-v-6777c92f></div><div class="skeleton-location shimmer" data-v-6777c92f></div><div class="skeleton-rating shimmer" data-v-6777c92f></div><div class="skeleton-price shimmer" data-v-6777c92f></div></div>',2)])]))}},P=H(me,[["__scopeId","data-v-6777c92f"]]);async function he(S,d=10){return Q(`/recommendations?userId=${S}&limit=${d}`)}const ve={class:"container main-content"},fe={key:0,class:"theme-section recommendation-section"},pe={class:"row-scroll"},_e={key:1,class:"theme-section skeleton-section"},ge={class:"row-scroll"},ke={key:2,class:"theme-section skeleton-section"},we={class:"row-scroll"},ye={key:3,class:"empty-state"},be={class:"section-header"},Ce=["onClick","onKeydown"],Ae={key:0,class:"row-scroll"},Ie={key:0,class:"row-card more-card"},Se=["onClick"],Te=["aria-label","onClick"],$e=12,Re=8,Ne={__name:"HomeView",setup(S){const d=se(),f=v([]),T=v([]),c=v(new Set),b=v(!1),L=v(!1),p=v(""),$=Y(),M=$e-1,x=e=>{const a=e.accommodationsId??e.accommodationId??e.id,t=e.accommodationsName??e.accommodationName??e.title??"",o=e.shortDescription??e.description??"",m=e.rating??null,h=e.reviewCount??e.review_count??null,C=[e.city,e.district,e.township].filter(Boolean).join(" "),g=Number(e.minPrice??e.price??0),N=e.imageUrl||"https://placehold.co/400x300",s=e.score??null,l=e.matchedThemes??[],u=e.matchedTags??[];return{id:a,title:t,description:o,rating:m,reviewCount:h,location:C,price:g,imageUrl:N,score:s,matchedThemes:l,matchedTags:u}},X=e=>e.slice(0,M),j=e=>e.length>M,R=e=>e?`${e} 게스트하우스 보러가기`:"더 많은 게스트하우스 보러가기",_=e=>{d.push({path:"/list",query:{themeIds:String(e)}})},B=e=>Array.isArray(e)?e:e?.recommendedAccommodations||e?.generalAccommodations?[...e.recommendedAccommodations||[],...e.generalAccommodations||[]]:e?.items??e?.content??e?.data??[],q=async()=>{if(I())try{const e=await ie();e.status===200&&Array.isArray(e.data)&&(c.value=new Set(e.data))}catch(e){console.error("Failed to load wishlist",e)}},F=async e=>{if(!I()){confirm(`로그인이 필요한 서비스입니다.
로그인 페이지로 이동하시겠습니까?`)&&d.push("/login");return}if(c.value.has(e)){c.value.delete(e);try{await ce(e)}catch(t){c.value.add(e),console.error(t)}}else{c.value.add(e);try{await le(e)}catch(t){c.value.delete(e),console.error(t)}}},z=async()=>{b.value=!0,p.value="";try{const e=await oe();if(!e.ok||!Array.isArray(e.data)){p.value="테마 목록을 불러오지 못했습니다.";return}const a=e.data;let t=[];if(I())try{const s=await ae();s.ok&&Array.isArray(s.data)&&(t=s.data)}catch(s){console.warn("Failed to fetch user themes, continuing with all themes:",s)}const o=new Set(t.map(s=>s.id)),m=a.filter(s=>!o.has(s.id)).sort((s,l)=>{const u=Number(s.accommodationCount??0),k=Number(l.accommodationCount??0);return u!==k?k-u:(s.id??0)-(l.id??0)}),h=[...t,...m].slice(0,Re),C=h.map(s=>s.id).filter(Boolean);let g={};if(C.length){const s=await ne(C);s.ok&&s.data&&(g=s.data)}const N=await Promise.all(h.map(async s=>{const l=g?.[s.id]??g?.[String(s.id)];let u=l?B(l):[];if(!l){const k=await re([s.id]);u=k.ok?B(k.data):[]}return{id:s.id,name:s.themeName,items:u.map(x)}}));f.value=N.filter(s=>s.items.length)}catch(e){console.error("Failed to load sections",e),p.value="테마 목록을 불러오지 못했습니다."}finally{b.value=!1}},J=async()=>{if(I()){L.value=!0;try{let e=ee();if(!e){const{getCurrentUser:t}=await te(async()=>{const{getCurrentUser:m}=await import("./index-CetC7qP8.js").then(h=>h.ak);return{getCurrentUser:m}},__vite__mapDeps([0,1])),o=await t();o.ok&&o.data?.userId&&(e=o.data.userId)}if(!e)return;const a=await he(e,10);a.ok&&a.data?.recommendations&&(T.value=a.data.recommendations.map(x))}catch(e){console.error("Failed to load recommendations",e)}finally{L.value=!1}}};return Z(()=>{$.setKeyword(""),$.resetDates(),$.setGuestCount(1),z(),q(),J()}),(e,a)=>(r(),i("main",ve,[a[4]||(a[4]=O('<div class="bannner" data-v-489bd1a1><img src="'+de+'" alt="Home banner" class="banner-image" data-v-489bd1a1><div class="banner-text" data-v-489bd1a1><h2 class="banner-caption" data-v-489bd1a1>좋은 사람, 좋은 장소, 좋은 시간</h2><h1 class="banner-title" data-v-489bd1a1>지금, 이곳</h1></div></div>',1)),T.value.length>0?(r(),i("section",fe,[a[0]||(a[0]=n("div",{class:"section-header"},[n("h2",{class:"section-title recommendation-title"},[n("span",null,"✨ 당신을 위한 맞춤 추천")])],-1)),n("div",pe,[(r(!0),i(w,null,y(T.value,t=>(r(),U(K,{key:t.id,id:t.id,title:t.title,description:t.description,rating:t.rating,"review-count":t.reviewCount,location:t.location,price:t.price,"image-url":t.imageUrl,"is-favorite":c.value.has(t.id),onToggleFavorite:F,onClick:o=>G(d).push(`/room/${t.id}`),class:"row-card"},null,8,["id","title","description","rating","review-count","location","price","image-url","is-favorite","onClick"]))),128))])])):A("",!0),b.value?(r(),i("section",_e,[a[1]||(a[1]=n("div",{class:"section-header"},[n("div",{class:"skeleton-section-title shimmer"})],-1)),n("div",ge,[(r(),i(w,null,y(4,t=>V(P,{key:t})),64))])])):A("",!0),b.value?(r(),i("section",ke,[a[2]||(a[2]=n("div",{class:"section-header"},[n("div",{class:"skeleton-section-title shimmer"})],-1)),n("div",we,[(r(),i(w,null,y(4,t=>V(P,{key:t})),64))])])):p.value?(r(),i("div",ye,E(p.value),1)):(r(!0),i(w,{key:4},y(f.value,t=>(r(),i("section",{key:t.id,class:"theme-section"},[n("div",be,[n("h2",{class:"section-title theme-title",role:"button",tabindex:"0",onClick:o=>_(t.id),onKeydown:[W(D(o=>_(t.id),["prevent"]),["enter"]),W(D(o=>_(t.id),["prevent"]),["space"])]},[n("span",null,E(R(t.name)),1),a[3]||(a[3]=n("span",{class:"theme-title-arrow"},"→",-1))],40,Ce)]),t.items.length?(r(),i("div",Ae,[(r(!0),i(w,null,y(X(t.items),o=>(r(),U(K,{key:o.id,id:o.id,title:o.title,description:o.description,rating:o.rating,"review-count":o.reviewCount,location:o.location,price:o.price,"image-url":o.imageUrl,"is-favorite":c.value.has(o.id),onToggleFavorite:F,onClick:m=>G(d).push(`/room/${o.id}`),class:"row-card"},null,8,["id","title","description","rating","review-count","location","price","image-url","is-favorite","onClick"]))),128)),j(t.items)?(r(),i("div",Ie,[n("button",{type:"button",class:"more-text",onClick:o=>_(t.id)},E(R(t.name)),9,Se),n("button",{type:"button",class:"more-arrow","aria-label":R(t.name),onClick:o=>_(t.id)},"→",8,Te)])):A("",!0)])):A("",!0)]))),128))]))}},Fe=H(Ne,[["__scopeId","data-v-489bd1a1"]]);export{Fe as default};
>>>>>>>> develop:backend/src/main/resources/static/assets/HomeView-jnqSjnXG.js
