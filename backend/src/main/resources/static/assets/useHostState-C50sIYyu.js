const O=n=>{if(n==null)return"unknown";const e=String(n).trim().toLowerCase();return e==="approved"||e==="approve"?"approved":e==="pending"||e==="inspection"||e==="review"||e==="reviewing"||e==="under_review"||e==="underreview"||e==="recheck"||e==="re-check"||e==="re-review"||e==="resubmit"||e==="resubmitted"||e==="재검토중"||e==="재심사중"||e==="재심사"||e==="검수중"?"pending":e==="rejected"||e==="reject"||e==="denied"?"rejected":e==="active"||e==="inactive"||e==="operating"||e==="stopped"||e==="stop"||e==="paused"||e==="1"||e==="true"?"approved":e==="2"?"pending":e==="3"||e==="0"?"rejected":"unknown"},g=(n=[])=>{const e=Array.isArray(n)?n:[],r={total:e.length,approved:0,pending:0,rejected:0,unknown:0};e.forEach(c=>{const i=c?.approvalStatus??c?.status??c?.accommodationStatus??c?.reviewStatus,s=O(i);s==="approved"?r.approved+=1:s==="pending"?r.pending+=1:s==="rejected"?r.rejected+=1:r.unknown+=1});let o="empty";return r.total===0?o="empty":r.approved>0?o="active":r.pending>0?o="pending-only":r.rejected>0?o="rejected":o="pending-only",{hostState:o,counts:r}},y=(n=[])=>{const e=Array.isArray(n)?n:[],o=typeof window<"u"?(()=>{try{const t=sessionStorage.getItem("hostResubmitMap");return t?JSON.parse(t):{}}catch{return{}}})():{},c=1440*60*1e3,i=t=>{if(!t)return!1;const d=o[String(t)];return d?Date.now()-Number(d)<=c:!1},s=e.map(t=>{const d=t?.approvalStatus??t?.status??t?.accommodationStatus??t?.reviewStatus;let u=O(d);const j=t?.isResubmitted===1||t?.isResubmitted===!0,f=t?.accommodationsId??t?.accommodationId??t?.id;return j&&(u="pending"),{approvalStatus:u==="rejected"&&i(f)?"pending":u,rejectReason:t?.rejectionReason??t?.rejectReason??t?.approvalReason??t?.reason??""}}),a=g(s),p=s.find(t=>t.approvalStatus==="rejected"),l=s.find(t=>t.approvalStatus==="pending"&&t.rejectReason),R=a.hostState==="pending-only"&&l?"recheck":a.hostState,v=a.counts.total>0,S=a.counts.approved>0,h=a.counts.pending>0,m=a.counts.rejected>0,A=v?S?"APPROVED":"NEEDS_APPROVAL":"NO_ACCOMMODATION";return{hostState:R,counts:a.counts,rejectedReason:p?.rejectReason??"",recheckReason:l?.rejectReason??"",hasAnyAccommodation:v,hasApprovedAccommodation:S,hasPendingLike:h,hasRejectedLike:m,gateState:A}},w=n=>{const e=n?.hostState??"empty",r=e==="empty",o=e==="rejected",c=e==="recheck",i=n?.gateState??(r?"NO_ACCOMMODATION":"NEEDS_APPROVAL"),s=i==="NO_ACCOMMODATION"?"숙소를 등록해보세요!":"호스트 기능은 승인 후 이용 가능해요",a=i==="NO_ACCOMMODATION"?"숙소를 등록하면 예약/매출/리뷰/리포트를 한 곳에서 관리할 수 있습니다.":"숙소 등록 및 심사가 완료되면 예약/매출/리뷰/리포트를 사용할 수 있습니다.",p=o?n?.rejectedReason?`반려 사유: ${n.rejectedReason}`:"반려 사유를 확인할 수 없습니다.":c&&n?.recheckReason?`이전 반려 사유: ${n.recheckReason}`:"";return{title:s,description:a,reason:p,primaryText:i==="NO_ACCOMMODATION"?"숙소 등록하러 가기":"숙소 관리로 이동",primaryTo:i==="NO_ACCOMMODATION"?"/host/accommodation/register":"/host/accommodation",secondaryText:"닫기",secondaryTo:"/host"}};export{w as b,y as d,O as n};
