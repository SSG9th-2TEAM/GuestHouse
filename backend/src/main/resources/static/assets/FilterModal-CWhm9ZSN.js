import{_ as Q,r as y,y as W,b as Z,q as g,c as i,d as ee,e as t,t as _,C as O,D as b,E as F,F as $,f as P,z as te,o as r}from"./index-BGbAi4wu.js";import{f as se}from"./theme-BfPRAnyM.js";const ne={key:0,class:"modal-wrapper"},ae={class:"modal-content"},le={class:"modal-header"},oe={class:"modal-body"},ue={class:"price-display"},ie={class:"slider-container"},re={class:"guest-row"},ce={class:"guest-controls"},de=["disabled"],me={class:"guest-count"},ve={class:"theme-groups"},pe={key:0},he={class:"theme-section-title"},ye={class:"theme-grid"},ge=["onClick"],_e=["src","alt"],Ce={key:1,class:"theme-chip__icon theme-chip__icon--empty"},fe={class:"theme-chip__label"},Te={key:1,class:"theme-empty"},be={key:2,class:"theme-empty"},v=0,c=3e5,I=5e3,Ie={__name:"FilterModal",props:{isOpen:Boolean,currentMin:Number,currentMax:Number,currentThemes:{type:Array,default:()=>[]},currentGuestCount:{type:Number,default:1}},emits:["close","apply"],setup(M,{emit:S}){const d=M,w=S,o=y(d.currentMin??v),l=y(d.currentMax??c),f=y([]),m=y([...d.currentThemes]),p=y(d.currentGuestCount??1),C=y(!1),h=y("max");W(()=>d.isOpen,s=>{s&&(o.value=d.currentMin??v,l.value=d.currentMax??c,m.value=[...d.currentThemes],p.value=d.currentGuestCount??1,f.value.length||x())});const x=async()=>{if(!C.value){C.value=!0;try{const{ok:s,data:e}=await se();s&&Array.isArray(e)&&(f.value=e)}catch(s){console.error("Failed to load themes",s)}finally{C.value=!1}}},U=s=>{m.value.includes(s)?m.value=m.value.filter(e=>e!==s):m.value=[...m.value,s]},B=()=>{p.value+=1},R=()=>{p.value=Math.max(1,p.value-1)};Z(()=>{x()});const Y=()=>{o.value>l.value&&(o.value=l.value)},z=()=>{l.value<o.value&&(l.value=o.value)},G=()=>{h.value="min",Y()},H=()=>{h.value="max",z()},V=g(()=>l.value>=c?`${c.toLocaleString()}원+`:`${l.value.toLocaleString()}원`),k=g(()=>l.value-o.value>I?!1:h.value==="min"),D={NATURE:"자연",CULTURE:"문화",ACTIVITY:"액티비티",VIBE:"분위기",PARTY:"파티/주류",MEETING:"만남/로맨스",PERSONA:"성향/동반",FACILITY:"시설/편의",FOOD:"음식",PLAY:"놀거리",AROUND_THEME:"주변테마",ACTIVITY_COMMUNITY:"액티비티/커뮤니티",LOCATION:"위치",LIFESTYLE:"라이프스타일",OTHER:"기타"},K=s=>(s==null?"":String(s).trim())||"OTHER",T=s=>s==null?"":String(s).trim(),q=s=>[...s].sort((e,a)=>{const n=T(e?.themeName)==="문화유적",u=T(a?.themeName)==="문화유적";return n===u?0:n?1:-1}),E=g(()=>{const s=new Map;f.value.forEach(n=>{const u=K(n?.themeCategory);s.has(u)||s.set(u,[]),s.get(u).push(n)});const e=Array.from(s,([n,u])=>({key:n,label:D[n]??n,items:q(u)})),a=n=>n.items.some(u=>T(u?.themeName)==="문화유적");return e.sort((n,u)=>{const L=a(n),J=a(u);return L===J?0:L?1:-1}),e}),N=g(()=>(o.value-v)/(c-v)*100),A=g(()=>(l.value-v)/(c-v)*100),X=()=>{w("apply",{min:o.value,max:l.value>=c?null:l.value,themeIds:[...m.value],guestCount:p.value})},j=()=>{o.value=v,l.value=c,m.value=[],p.value=1,h.value="max"};return(s,e)=>M.isOpen?(r(),i("div",ne,[t("div",ae,[t("div",le,[e[7]||(e[7]=t("h3",null,"필터",-1)),t("button",{class:"close-btn",onClick:e[0]||(e[0]=a=>s.$emit("close"))},"닫기")]),t("div",oe,[e[9]||(e[9]=t("div",{class:"section-header"},[t("span",{class:"section-title"},"가격")],-1)),t("div",ue,[t("span",null,_(o.value.toLocaleString())+"원",1),e[8]||(e[8]=t("span",null,"~",-1)),t("span",null,_(V.value),1)]),t("div",ie,[t("div",{class:"slider-track",style:b({background:`linear-gradient(to right, #ddd ${N.value}%, #222 ${N.value}%, #222 ${A.value}%, #ddd ${A.value}%)`})},null,4),O(t("input",{type:"range",min:v,max:c,step:I,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),onInput:G,onPointerdown:e[2]||(e[2]=a=>h.value="min"),onFocus:e[3]||(e[3]=a=>h.value="min"),class:"range-input",style:b({zIndex:k.value?2:1})},null,36),[[F,o.value,void 0,{number:!0}]]),O(t("input",{type:"range",min:v,max:c,step:I,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value=a),onInput:H,onPointerdown:e[5]||(e[5]=a=>h.value="max"),onFocus:e[6]||(e[6]=a=>h.value="max"),class:"range-input",style:b({zIndex:k.value?1:2})},null,36),[[F,l.value,void 0,{number:!0}]])]),e[10]||(e[10]=t("div",{class:"section-header space-top"},[t("span",{class:"section-title"},"게스트 인원")],-1)),t("div",re,[t("div",ce,[t("button",{class:"guest-btn",type:"button",onClick:R,disabled:p.value<=1},"-",8,de),t("span",me,_(p.value),1),t("button",{class:"guest-btn",type:"button",onClick:B},"+")])]),e[11]||(e[11]=t("div",{class:"section-header space-top"},[t("span",{class:"section-title"},"테마"),t("span",{class:"section-hint"},"복수 선택 가능")],-1)),t("div",ve,[E.value.length?(r(),i("div",pe,[(r(!0),i($,null,P(E.value,a=>(r(),i("div",{key:a.key,class:"theme-section"},[t("div",he,_(a.label),1),t("div",ye,[(r(!0),i($,null,P(a.items,n=>(r(),i("button",{key:n.id,type:"button",class:te(["theme-chip",{active:m.value.includes(n.id)}]),onClick:u=>U(n.id)},[n.themeImageUrl?(r(),i("img",{key:0,src:n.themeImageUrl,alt:n.themeName,class:"theme-chip__icon"},null,8,_e)):(r(),i("span",Ce)),t("span",fe,_(n.themeName),1)],10,ge))),128))])]))),128))])):C.value?(r(),i("div",Te,"테마를 불러오는 중...")):(r(),i("div",be,"테마 정보를 불러올 수 없습니다."))])]),t("div",{class:"modal-footer"},[t("button",{class:"btn-reset",type:"button",onClick:j},"초기화"),t("button",{class:"btn-apply",onClick:X},"적용")])])])):ee("",!0)}},ke=Q(Ie,[["__scopeId","data-v-13ef9588"]]);export{ke as F};
