const f=t=>{if(t==null)return"unknown";const e=String(t).trim().toLowerCase();return e==="approved"||e==="approve"?"approved":e==="pending"||e==="inspection"||e==="review"||e==="reviewing"||e==="under_review"||e==="underreview"||e==="recheck"||e==="re-check"||e==="re-review"||e==="resubmit"||e==="resubmitted"||e==="재검토중"||e==="재심사중"||e==="재심사"||e==="검수중"?"pending":e==="rejected"||e==="reject"||e==="denied"?"rejected":e==="active"||e==="inactive"||e==="operating"||e==="stopped"||e==="stop"||e==="paused"||e==="1"||e==="true"?"approved":e==="2"?"pending":e==="3"||e==="0"?"rejected":"unknown"},j=(t=[])=>{const e=Array.isArray(t)?t:[],n={total:e.length,approved:0,pending:0,rejected:0,unknown:0};e.forEach(s=>{const c=s?.approvalStatus??s?.status??s?.accommodationStatus??s?.reviewStatus,a=f(c);a==="approved"?n.approved+=1:a==="pending"?n.pending+=1:a==="rejected"?n.rejected+=1:n.unknown+=1});let o="empty";return n.total===0?o="empty":n.approved>0?o="active":n.pending>0?o="pending-only":n.rejected>0?o="rejected":o="pending-only",{hostState:o,counts:n}},b=(t=[])=>{const e=Array.isArray(t)?t:[],o=typeof window<"u"?(()=>{try{const r=sessionStorage.getItem("hostResubmitMap");return r?JSON.parse(r):{}}catch{return{}}})():{},s=1440*60*1e3,c=r=>{if(!r)return!1;const u=o[String(r)];return u?Date.now()-Number(u)<=s:!1},a=e.map(r=>{const u=r?.approvalStatus??r?.status??r?.accommodationStatus??r?.reviewStatus;let p=f(u);const v=r?.isResubmitted===1||r?.isResubmitted===!0,A=r?.accommodationsId??r?.accommodationId??r?.id;return v&&(p="pending"),{approvalStatus:p==="rejected"&&c(A)?"pending":p,rejectReason:r?.rejectionReason??r?.rejectReason??r?.approvalReason??r?.reason??""}}),i=j(a),d=a.find(r=>r.approvalStatus==="rejected"),g=a.find(r=>r.approvalStatus==="pending"&&r.rejectReason),y=i.hostState==="pending-only"&&g?"recheck":i.hostState,l=i.counts.total>0,S=i.counts.approved>0,N=i.counts.pending>0,O=i.counts.rejected>0,R=l?S?"APPROVED":"NEEDS_APPROVAL":"NO_ACCOMMODATION";return{hostState:y,counts:i.counts,rejectedReason:d?.rejectReason??"",recheckReason:g?.rejectReason??"",hasAnyAccommodation:l,hasApprovedAccommodation:S,hasPendingLike:N,hasRejectedLike:O,gateState:R}},M=t=>{const e=t?.hostState??"empty",n=e==="empty",o=e==="rejected",s=e==="recheck",c=t?.gateState??(n?"NO_ACCOMMODATION":"NEEDS_APPROVAL"),a=c==="NO_ACCOMMODATION"?"숙소를 등록해보세요!":"호스트 기능은 승인 후 이용 가능해요",i=c==="NO_ACCOMMODATION"?"숙소를 등록하면 예약/매출/리뷰/리포트를 한 곳에서 관리할 수 있습니다.":"숙소 등록 및 심사가 완료되면 예약/매출/리뷰/리포트를 사용할 수 있습니다.",d=o?t?.rejectedReason?`반려 사유: ${t.rejectedReason}`:"반려 사유를 확인할 수 없습니다.":s&&t?.recheckReason?`이전 반려 사유: ${t.recheckReason}`:"";return{title:a,description:i,reason:d,primaryText:c==="NO_ACCOMMODATION"?"숙소 등록하러 가기":"숙소 관리로 이동",primaryTo:c==="NO_ACCOMMODATION"?"/host/accommodation/register":"/host/accommodation",secondaryText:"닫기",secondaryTo:"/host"}},h=["일","월","화","수","목","금","토"],w=t=>{const e=Number(t??0);return Number.isFinite(e)?`₩${Math.round(e).toLocaleString()}`:"₩0"},D=t=>{const e=Number(t??0);return Number.isFinite(e)?Math.round(e).toLocaleString():"0"},m=(t,e=!1)=>{if(!t)return"";const n=new Date(t);if(Number.isNaN(n.getTime()))return String(t);const o=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),c=String(n.getDate()).padStart(2,"0"),a=String(n.getHours()).padStart(2,"0"),i=String(n.getMinutes()).padStart(2,"0"),d=`${s}.${c}(${h[n.getDay()]}) ${a}:${i}`;return e?`${o}.${d}`:d},$=(t,e=!1)=>{if(!t)return"";const n=new Date(t);if(Number.isNaN(n.getTime()))return String(t);const o=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),c=String(n.getDate()).padStart(2,"0"),a=`${s}.${c}(${h[n.getDay()]})`;return e?`${o}.${a}`:a},k=(t,e,n=!1)=>{const o=m(t,n),s=m(e,n);return!o&&!s?"":`${o} → ${s}`},C=t=>{if(!t)return"";if(typeof t=="string"){const e=t.split(":");return e.length>=2?`${e[0]}:${e[1]}`:t}return String(t)};export{$ as a,w as b,D as c,b as d,M as e,C as f,m as g,k as h,f as n};
