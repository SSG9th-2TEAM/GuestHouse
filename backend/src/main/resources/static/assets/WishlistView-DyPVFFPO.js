import{_ as k,r as d,b as y,c as a,e as o,F as h,f as _,k as w,o as i,d as b,t as r}from"./index-Br9ce33d.js";import{b as W,r as x}from"./wishlist-D500ZOLa.js";const C={class:"wishlist-page container"},B={key:0,class:"empty-state"},F={key:1,class:"wish-grid"},I=["onClick"],N={class:"card-image-wrapper"},V=["src"],L=["onClick"],P={class:"card-info"},R={class:"row-top"},D={class:"title"},M={class:"rating"},S={class:"location"},T={class:"meta-row"},U={key:0,class:"price"},$={key:1,class:"price"},j={key:0,class:"themes"},A={__name:"WishlistView",setup(E){const p=w(),c=d([]),l=d(!0),u=async()=>{l.value=!0;try{const e=await W();e.ok&&(console.log("Wishlist API Response:",e.data),c.value=e.data.map(s=>({id:s.accommodationsId,title:s.accommodationsName,location:[s.city,s.district,s.township].filter(Boolean).join(" "),rating:s.rating||0,image:g(s.mainImageUrl)||"https://placehold.co/300x200",price:s.minPrice,themes:s.themes||[]})))}catch(e){console.error("Failed to load wishlist",e)}finally{l.value=!1}},g=e=>e||"",m=async(e,s)=>{if(e.stopPropagation(),!!confirm("위시리스트에서 삭제하시겠습니까?"))try{(await x(s)).ok&&(c.value=c.value.filter(n=>n.id!==s))}catch(t){console.error(t),alert("삭제에 실패했습니다.")}},v=e=>{p.push(`/room/${e}`)};return y(()=>{u()}),(e,s)=>(i(),a("div",C,[s[1]||(s[1]=o("h1",{class:"page-title"},"위시리스트",-1)),c.value.length===0?(i(),a("div",B," 위시리스트가 비어있습니다. ")):(i(),a("div",F,[(i(!0),a(h,null,_(c.value,t=>(i(),a("div",{key:t.id,class:"wish-card",onClick:n=>v(t.id)},[o("div",N,[o("img",{src:t.image,alt:"thumbnail",class:"card-img"},null,8,V),o("button",{class:"heart-btn",onClick:n=>m(n,t.id)},[...s[0]||(s[0]=[o("span",{class:"heart-icon"},"♥",-1)])],8,L)]),o("div",P,[o("div",R,[o("h3",D,r(t.title),1),o("span",M,"★ "+r(t.rating?t.rating.toFixed(1):"0.0"),1)]),o("p",S,r(t.location),1),o("div",T,[t.price?(i(),a("span",U,r(Number(t.price).toLocaleString())+"원",1)):(i(),a("span",$,"가격 정보 없음"))]),t.themes&&t.themes.length?(i(),a("div",j,[(i(!0),a(h,null,_(t.themes,(n,f)=>(i(),a("span",{key:f,class:"theme-tag"},"#"+r(n),1))),128))])):b("",!0)])],8,I))),128))]))]))}},G=k(A,[["__scopeId","data-v-3bad5847"]]);export{G as default};
