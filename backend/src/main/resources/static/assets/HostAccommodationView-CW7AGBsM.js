import z from"./HostAccommodationRegister-DXDDVBPR.js";import{f as M}from"./hostAccommodation-DKoFDS_c.js";import{_ as U,r as p,q as h,b as F,c as a,l as G,e as n,d as m,t as i,A as v,F as H,f as P,o,z as W}from"./index-BGbAi4wu.js";const q={class:"accommodation-container"},D={key:1,class:"list-view-wrapper"},J={class:"host-view-header"},K={class:"host-subtitle"},O={key:0,class:"accommodation-list"},T=["onClick"],Q=["src","alt"],X={class:"card-info"},Y={class:"info-header"},Z=["onClick"],ss={key:0,class:"status-reason"},es={class:"info-details"},ts={class:"detail-item"},ns={class:"detail-item"},os={class:"detail-item"},as={class:"price-actions"},is={class:"price-info"},rs={class:"price"},cs={class:"action-buttons"},ls=["onClick"],us={key:1,class:"empty-state"},ds={key:2,class:"empty-state"},ps={key:3,class:"empty-state"},vs=1440*60*1e3,gs={__name:"HostAccommodationView",setup(_s){const R=s=>s?s.startsWith("blob:")||s.startsWith("http")?s:`${s}`:"https://placehold.co/400x300",g=p("list"),c=p([]),u=p(!1),l=p(""),b=h(()=>c.value.length),S=h(()=>c.value.length>0),k=s=>new Intl.NumberFormat("ko-KR").format(s),y=(s,e,t,r)=>{const d=t?String(t).toLowerCase():"";return s==="rejected"||d==="rejected"?"ë°˜ë ¤":s==="reinspection"||r?"ì¬ê²€í† ì¤‘":s==="pending"||d==="pending"?e?"ì¬ê²€í† ì¤‘":"ê²€ìˆ˜ì¤‘":s==="active"?"ìš´ì˜ì¤‘":s==="inactive"?"ìš´ì˜ì¤‘ì§€":"ìƒíƒœ í™•ì¸"},w=()=>g.value="list",C=s=>{c.value.unshift({id:s.id??Date.now(),status:s.status??"active",...s}),g.value="list"},j=s=>{if(!s)return"inactive";const e=String(s).toLowerCase();return e==="approved"||e==="active"||e==="operating"?"active":e==="reinspection"?"reinspection":e==="pending"||e==="inspection"||e==="review"||e==="reviewing"?"pending":e==="rejected"||e==="reject"||e==="denied"?"rejected":e==="inactive"||e==="stopped"||e==="stop"?"inactive":e},A=()=>{try{const s=sessionStorage.getItem("hostResubmitMap");return s?JSON.parse(s):{}}catch{return{}}},$=s=>{if(!s)return!1;const t=A()[String(s)];return t?Date.now()-Number(t)<=vs:!1},L=s=>{const e=s.accommodationsId??s.accommodationId??s.id,t=s.accommodationsName??s.name??"",r=s.approvalStatus??s.reviewStatus??null,d=s.isResubmitted===1||s.isResubmitted===!0,N=r??s.status??s.accommodationStatus;let _=j(N);const B=s.rejectionReason??s.rejectReason??s.approvalReason??s.reason??"";_==="rejected"&&$(e)&&(_="pending");const E=[s.city,s.district,s.township,s.address].filter(Boolean).join(" "),I=s.maxGuests??s.max_guests??s.maxGuestCount??0,V=s.roomCount??s.roomsCount??s.totalRooms??0,x=s.pricePerNight??s.price??s.roomPrice??0,f=s.images??s.imageUrls??s.imageUrl??[];return{id:e,name:t,status:_,location:E,maxGuests:I,roomCount:V,price:x,images:Array.isArray(f)?f:[f].filter(Boolean),rejectionReason:B,approvalStatus:r,isResubmitted:d}};return F(async()=>{u.value=!0,l.value="";const s=await M();if(s.ok){const e=s.data;console.log("API Response:",e);const t=Array.isArray(e)?e:e?.items??e?.content??e?.data??[];console.log("Raw list:",t),c.value=t.map(L),console.log("Normalized:",c.value)}else l.value="ìˆ™ì†Œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";u.value=!1}),(s,e)=>(o(),a("div",q,[g.value==="register"?(o(),G(z,{key:0,onCancel:w,onSubmit:C})):(o(),a("div",D,[n("div",J,[n("div",null,[e[1]||(e[1]=n("h2",{class:"host-title"},"ìˆ™ì†Œ ê´€ë¦¬",-1)),n("p",K,"ì´ "+i(b.value)+"ê°œì˜ ìˆ™ì†Œ",1)])]),n("button",{class:"register-btn",onClick:e[0]||(e[0]=t=>s.$router.push("/host/accommodation/register"))},[...e[2]||(e[2]=[n("span",{class:"plus-icon"},"+",-1),v(" ìƒˆ ìˆ™ì†Œ ë“±ë¡ ",-1)])]),S.value?(o(),a("div",O,[(o(!0),a(H,null,P(c.value,t=>(o(),a("article",{key:t.id,class:"accommodation-card"},[n("div",{class:"card-image clickable",onClick:r=>s.$router.push(`/room/${t.id}`)},[n("img",{src:R(t.images[0]),alt:t.name},null,8,Q)],8,T),n("div",X,[n("div",Y,[n("h3",{class:"accommodation-name clickable",onClick:r=>s.$router.push(`/room/${t.id}`)},i(t.name),9,Z),n("span",{class:W(["status-badge",{active:t.status==="active",pending:t.status==="pending",reinspection:t.status==="reinspection"||t.isResubmitted,rejected:t.status==="rejected"||String(t.approvalStatus??"").toLowerCase()==="rejected",inactive:t.status==="inactive"}])},i(y(t.status,t.rejectionReason,t.approvalStatus,t.isResubmitted)),3)]),t.status==="rejected"||String(t.approvalStatus??"").toLowerCase()==="rejected"?(o(),a("p",ss,i(t.rejectionReason?`ë°˜ë ¤ ì‚¬ìœ : ${t.rejectionReason}`:"ë°˜ë ¤ ì‚¬ìœ ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),1)):m("",!0),n("div",es,[n("span",ts,[e[3]||(e[3]=n("span",{class:"detail-icon"},"ğŸ“",-1)),v(i(t.location),1)]),n("span",ns,[e[4]||(e[4]=n("span",{class:"detail-icon"},"ğŸ‘¥",-1)),v("ìµœëŒ€ "+i(t.maxGuests)+"ëª…",1)]),n("span",os,[e[5]||(e[5]=n("span",{class:"detail-icon"},"ğŸ›ï¸",-1)),v(i(t.roomCount)+"ê°œ ê°ì‹¤",1)])]),n("div",as,[n("div",is,[n("span",rs,"â‚©"+i(k(t.price)),1),e[6]||(e[6]=n("span",{class:"price-unit"},"/ë°•",-1))]),n("div",cs,[n("button",{class:"action-btn edit-btn",onClick:r=>s.$router.push(`/host/accommodation/edit/${t.id}`)},"ìˆ˜ì • ",8,ls)])])])]))),128))])):!u.value&&!l.value?(o(),a("div",us,[...e[7]||(e[7]=[n("div",{class:"empty-icon"},"ğŸ ",-1),n("h2",null,"ë“±ë¡ëœ ìˆ™ì†Œê°€ ì—†ìŠµë‹ˆë‹¤",-1),n("p",null,"ìƒˆ ìˆ™ì†Œë¥¼ ë“±ë¡í•˜ì—¬ ê²ŒìŠ¤íŠ¸ë¥¼ ë§ì´í•´ë³´ì„¸ìš”!",-1)])])):u.value?(o(),a("p",ds,"ìˆ™ì†Œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤.")):l.value?(o(),a("p",ps,i(l.value),1)):m("",!0)]))]))}},Ss=U(gs,[["__scopeId","data-v-41794a58"]]);export{Ss as default};
