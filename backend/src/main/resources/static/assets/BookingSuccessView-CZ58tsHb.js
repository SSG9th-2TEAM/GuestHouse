import{_ as b,r as y,b as h,s as N,c as l,e as s,t as a,d as r,z as c,k,o as i}from"./index-Br9ce33d.js";import{getReservation as f}from"./reservationApi-yKiDszUT.js";const P={class:"success-page"},D={class:"container content"},x={class:"card booking-number-card"},S={class:"number"},w={class:"card info-card"},A={class:"info-item"},L={class:"text"},M={class:"value"},B={class:"info-item"},C={class:"text"},I={class:"value"},R={class:"info-item"},V={class:"text"},E={class:"value"},T={class:"sub-text"},H={class:"info-item"},O={class:"text"},$={class:"value"},U={key:0,class:"info-item"},Y={class:"text"},q={class:"value"},z={key:1,class:"info-item"},F={class:"text"},K={class:"value"},j={class:"card payment-card"},G={class:"row"},J={class:"row total"},Q={key:0,class:"row"},W={class:"payment-date"},X={__name:"BookingSuccessView",setup(Z){const d=k(),u=N(),o=y({bookingNumber:"",accommodationName:"",location:"",dates:"",nights:0,guests:"",basePrice:0,fees:0,totalPrice:0,paymentDate:"",reserverName:"",reserverPhone:"",paymentMethod:""}),v=n=>({카드:"신용/체크카드",CARD:"신용/체크카드",가상계좌:"가상계좌",VIRTUAL_ACCOUNT:"가상계좌",계좌이체:"계좌이체",TRANSFER:"계좌이체",휴대폰:"휴대폰 결제",MOBILE_PHONE:"휴대폰 결제",간편결제:"간편결제",EASY_PAY:"간편결제",토스페이:"토스페이",토스결제:"토스페이"})[n]||n;h(async()=>{const n=history.state,e=u.query.reservationId||(n&&n.bookingData?n.bookingData.reservationId:null);if(e)try{const t=await f(e),_=new Date(t.checkin).toLocaleDateString(),g=new Date(t.checkout).toLocaleDateString();o.value={bookingNumber:"BK"+t.reservationId,accommodationName:t.accommodationName,location:t.accommodationAddress,dates:`${_} ~ ${g}`,nights:t.stayNights,guests:`게스트 ${t.guestCount}명`,basePrice:t.finalPaymentAmount,fees:0,totalPrice:t.finalPaymentAmount,paymentDate:new Date(t.createdAt).toLocaleString(),reserverName:t.reserverName,reserverPhone:t.reserverPhone,paymentMethod:t.paymentMethod||""}}catch(t){console.error("예약 정보 조회 실패:",t)}else if(n&&n.bookingData){const t=n.bookingData;o.value={...o.value,accommodationName:t.accommodationName,dates:t.dates,guests:t.guests,basePrice:t.basePrice,totalPrice:t.totalPrice,paymentDate:new Date().toLocaleString()}}});const m=()=>d.push("/"),p=()=>d.push("/reservations");return(n,e)=>(i(),l("div",P,[e[18]||(e[18]=s("div",{class:"top-banner"},[s("div",{class:"check-icon"},"✓"),s("h1",null,"예약이 완료되었습니다!"),s("p",null,"예약 확인 메일이 발송되었습니다")],-1)),s("div",D,[s("div",x,[e[0]||(e[0]=s("label",null,"예약 번호",-1)),s("div",S,a(o.value.bookingNumber),1)]),s("div",w,[e[7]||(e[7]=s("h3",null,"예약 정보",-1)),e[8]||(e[8]=s("hr",{class:"divider"},null,-1)),s("div",A,[s("div",L,[e[1]||(e[1]=s("span",{class:"label"},"숙소",-1)),s("span",M,a(o.value.accommodationName),1)])]),s("div",B,[s("div",C,[e[2]||(e[2]=s("span",{class:"label"},"위치",-1)),s("span",I,a(o.value.location),1)])]),s("div",R,[s("div",V,[e[3]||(e[3]=s("span",{class:"label"},"체크인 / 체크아웃",-1)),s("span",E,a(o.value.dates),1),s("span",T,a(o.value.nights)+"박",1)])]),s("div",H,[s("div",O,[e[4]||(e[4]=s("span",{class:"label"},"투숙객",-1)),s("span",$,a(o.value.guests),1)])]),o.value.reserverName?(i(),l("div",U,[s("div",Y,[e[5]||(e[5]=s("span",{class:"label"},"예약자명",-1)),s("span",q,a(o.value.reserverName),1)])])):r("",!0),o.value.reserverPhone?(i(),l("div",z,[s("div",F,[e[6]||(e[6]=s("span",{class:"label"},"연락처",-1)),s("span",K,a(o.value.reserverPhone),1)])])):r("",!0)]),s("div",j,[e[14]||(e[14]=s("h3",null,"결제 정보",-1)),e[15]||(e[15]=s("hr",{class:"divider"},null,-1)),s("div",G,[e[9]||(e[9]=s("span",null,"숙박 요금",-1)),s("span",null,a(o.value.basePrice?.toLocaleString())+"원",1)]),e[16]||(e[16]=s("hr",{class:"divider-light"},null,-1)),s("div",J,[e[10]||(e[10]=s("span",null,"총 결제 금액",-1)),s("span",null,a(o.value.totalPrice?.toLocaleString())+"원",1)]),o.value.paymentMethod?(i(),l("div",Q,[e[11]||(e[11]=s("span",null,"결제 수단",-1)),s("span",null,a(v(o.value.paymentMethod)),1)])):r("",!0),s("div",W,[e[12]||(e[12]=c(" 결제 완료",-1)),e[13]||(e[13]=s("br",null,null,-1)),c(" "+a(o.value.paymentDate),1)])]),e[17]||(e[17]=s("div",{class:"card guide-card"},[s("h3",null,"체크인 안내"),s("ul",null,[s("li",null,"체크인 시간: 오후 3시 이후"),s("li",null,"체크아웃 시간: 오전 11시"),s("li",null,"신분증을 지참해 주세요")])],-1)),s("div",{class:"actions"},[s("button",{class:"primary-btn",onClick:p},"예약 내역 보기"),s("button",{class:"secondary-btn",onClick:m},"새로운 예약하기")])])]))}},ts=b(X,[["__scopeId","data-v-5dd4e8d7"]]);export{ts as default};
