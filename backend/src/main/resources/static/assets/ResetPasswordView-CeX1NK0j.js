import{_ as V,r as o,b as k,s as R,k as q,c as f,e,d as N,C as h,E as _,z as i,t as g,a1 as x,o as P}from"./index-BGbAi4wu.js";const C={class:"reset-password-page"},S={class:"reset-password-container"},z={class:"form-section"},B={class:"input-group"},I={class:"password-requirements"},M={class:"input-group"},D=["disabled"],E={key:0,class:"error-message"},U={__name:"ResetPasswordView",setup($){const p=q(),m=R(),d=o(""),v=o(""),r=o(""),n=o(""),t=o(""),u=o(!1),l=o({minLength:!1,hasLetter:!1,hasNumber:!1,hasSpecial:!1}),b=a=>{l.value.minLength=a.length>=8,l.value.hasLetter=/[A-Za-z]/.test(a),l.value.hasNumber=/\d/.test(a),l.value.hasSpecial=/[@$!%*#?&]/.test(a)},w=()=>Object.values(l.value).every(a=>a),y=()=>{b(r.value)},L=async()=>{if(t.value="",!r.value||!n.value){t.value="모든 필드를 입력해주세요.";return}if(!w()){t.value="비밀번호가 요구사항을 충족하지 않습니다.";return}if(r.value!==n.value){t.value="비밀번호가 일치하지 않습니다.";return}u.value=!0;try{const a=await x({email:d.value,code:v.value,newPassword:r.value});a.ok?(alert("비밀번호가 성공적으로 변경되었습니다."),p.push("/login")):t.value=a.data?.message||"비밀번호 재설정 중 오류가 발생했습니다."}catch(a){console.error("비밀번호 재설정 오류:",a),t.value="비밀번호 재설정 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요."}finally{u.value=!1}};return k(()=>{d.value=m.query.email||"",v.value=m.query.code||"",(!d.value||!v.value)&&(alert("잘못된 접근입니다."),p.push("/find-password"))}),(a,s)=>(P(),f("div",C,[e("div",S,[s[6]||(s[6]=e("h1",{class:"page-title"},"비밀번호 재설정",-1)),e("div",z,[s[5]||(s[5]=e("p",{class:"description"},"새로운 비밀번호를 입력해주세요.",-1)),e("div",B,[s[2]||(s[2]=e("label",{for:"newPassword"},"새 비밀번호",-1)),h(e("input",{type:"password",id:"newPassword","onUpdate:modelValue":s[0]||(s[0]=c=>r.value=c),onInput:y,placeholder:"새 비밀번호"},null,544),[[_,r.value]])]),e("div",I,[s[3]||(s[3]=e("p",{class:"requirement-title"},"비밀번호 요구사항:",-1)),e("ul",null,[e("li",{class:i({valid:l.value.minLength})}," 8자 이상 ",2),e("li",{class:i({valid:l.value.hasLetter})}," 영문 포함 ",2),e("li",{class:i({valid:l.value.hasNumber})}," 숫자 포함 ",2),e("li",{class:i({valid:l.value.hasSpecial})}," 특수문자 포함 (@$!%*#?&) ",2)])]),e("div",M,[s[4]||(s[4]=e("label",{for:"confirmPassword"},"비밀번호 확인",-1)),h(e("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":s[1]||(s[1]=c=>n.value=c),placeholder:"비밀번호 확인"},null,512),[[_,n.value]])]),e("button",{class:"submit-btn",onClick:L,disabled:u.value||!w()},g(u.value?"변경 중...":"비밀번호 변경"),9,D),t.value?(P(),f("p",E,g(t.value),1)):N("",!0)])])]))}},A=V(U,[["__scopeId","data-v-c4f0747b"]]);export{A as default};
