<<<<<<<< HEAD:backend/src/main/resources/static/assets/List-B6aEI9pn.js
import{_ as he,u as ge,r as i,q as O,b as we,s as be,v as se,x as ke,y as T,c as l,e as a,d as I,m as _e,t as E,z as U,F as R,f as j,A as Ce,n as xe,p as $,k as qe,o as r,l as Ie,i as Pe}from"./index-dxBmIVsU.js";import{G as Ae}from"./GuesthouseCard-KK3O0VZ7.js";import{F as Fe}from"./FilterModal-MydLXxda.js";import{s as Le}from"./list-BvfXsd6_.js";import{u as Me}from"./useListingFilters-SVU6Tj97.js";import{f as Se,r as Oe,a as Te}from"./wishlist-o35OpDsa.js";import"./theme-BCRLihUQ.js";const Ee={class:"container main-content"},Re={class:"header"},$e={key:0},ze={key:1},Ge={class:"sort-wrapper"},Be={class:"sort-label"},De={key:0,class:"sort-dropdown"},Ne=["onClick"],We={key:0,class:"list-container"},Ke={key:1,class:"empty-state"},Ve={key:0,class:"load-more-status"},Ue={key:3,class:"list-pagination"},je=["disabled"],He={class:"page-list"},Qe={key:0,class:"page-ellipsis"},Ze=["aria-current","onClick"],Je=["disabled"],Xe=16,ae=1024,Ye={__name:"List",setup(et){const P=qe(),n=be(),o=ge(),{applyRouteFilters:H,buildFilterQuery:Q}=Me(),A=i([]),v=i(new Set),u=i(0),f=i(1),Z=i(0),m=i(!1),h=i(!1),F=i(null);let g=null;const d=i(typeof window<"u"?window.innerWidth<ae:!1),J=()=>{d.value=window.innerWidth<ae},w=i(!1),z=[{value:"recommended",label:"ì¶”ì²œìˆœ"},{value:"reviews",label:"ë¦¬ë·° ë§Žì€ìˆœ"},{value:"rating",label:"í‰ì  ë†’ì€ìˆœ"},{value:"priceHigh",label:"ê°€ê²© ë†’ì€ìˆœ"},{value:"priceLow",label:"ê°€ê²© ë‚®ì€ìˆœ"}],p=i("recommended"),y=i(!1),oe=O(()=>z.find(t=>t.value===p.value)?.label||"ì¶”ì²œìˆœ"),re=()=>{y.value=!y.value},ne=e=>{p.value!==e&&P.replace({query:{...n.query,sort:e}}),y.value=!1},le=e=>{const t=e.accommodationsId??e.accommodationId??e.id,s=e.accommodationsName??e.accommodationName??e.title??"",c=e.shortDescription??e.description??"",B=e.rating??null,D=e.reviewCount??e.review_count??null,N=[e.city,e.district,e.township].filter(Boolean).join(" "),M=Number(e.minPrice??e.price??0),W=e.imageUrl||"https://placehold.co/400x300",x=Number(e.maxGuests??e.capacity??e.maxGuest??0),K=Number.isFinite(x)?x:0;return{id:t,title:s,description:c,rating:B,reviewCount:D,location:N,price:M,imageUrl:W,maxGuests:K}},ie=()=>{const e=n.query.keyword;return Array.isArray(e)?e[0]??"":e??""},X=()=>{const e=ie();e!==o.keyword&&o.setKeyword(e)},Y=()=>{const e=n.query.sort;e&&z.some(t=>t.value===e)?p.value=e:p.value="recommended"},ue=async()=>{try{const e=await Se();e.status===200&&Array.isArray(e.data)&&(v.value=new Set(e.data))}catch(e){console.error("Failed to load wishlist",e)}},ce=async e=>{if(!Pe()){confirm(`ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤.
ë¡œê·¸ì¸ íŽ˜ì´ì§€ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)&&P.push("/login");return}if(v.value.has(e)){v.value.delete(e);try{await Oe(e)}catch(s){v.value.add(e),console.error(s)}}else{v.value.add(e);try{await Te(e)}catch(s){v.value.delete(e),console.error(s)}}},b=async({themeIds:e=o.themeIds,keyword:t=o.keyword,checkin:s=o.startDate,checkout:c=o.endDate,guestCount:B=o.guestCount,minPrice:D=o.minPrice,maxPrice:N=o.maxPrice,page:M=0,sort:W=p.value,reset:x=!1,appendData:K=!0}={})=>{if(!(m.value||h.value)){x?(m.value=!0,u.value=0):h.value=!0;try{const q=await Le({themeIds:e,keyword:t,checkin:s,checkout:c,guestCount:B,minPrice:D,maxPrice:N,page:M,size:Xe,sort:W});if(q.ok){const V=q.data,te=(Array.isArray(V?.items)?V.items:[]).map(le);x||!K?A.value=te:A.value=[...A.value,...te];const S=V?.page;S&&(u.value=S.number??M,f.value=S.totalPages??f.value,Z.value=S.totalElements??0)}else console.error("Failed to load list",q.status)}catch(q){console.error("Failed to load list",q)}finally{m.value=!1,h.value=!1}}},k=O(()=>A.value),de=({min:e,max:t,themeIds:s=[],guestCount:c=1})=>{o.setPriceRange(e,t),o.setThemeIds(s),o.setGuestCount(c),w.value=!1,b({themeIds:s,reset:!0})},ve=e=>{if(!e)return;const t={from:"list",sort:p.value,...Q()};P.push({path:`/room/${e}`,query:t})},pe=()=>{P.push({path:"/map",query:{...Q(),from:"list"}})},_=O(()=>u.value+1<f.value),fe=()=>{if(!d.value||!_.value||m.value||h.value)return;const e=u.value+1;b({page:e,appendData:!0})},G=e=>{if(d.value)return;const t=Math.min(Math.max(e,0),f.value-1);t!==u.value&&(b({page:t,reset:!1,appendData:!1}),window.scrollTo({top:0,behavior:"smooth"}))},ye=O(()=>{const e=f.value,t=u.value+1;return e<=5?Array.from({length:e},(s,c)=>c+1):t<=2?[1,2,3,"ellipsis",e]:t===3?[1,2,3,4,"ellipsis",e]:t>=e-1?[1,"ellipsis",e-2,e-1,e]:[1,"ellipsis",t-1,t,t+1,"ellipsis",e]}),C=()=>{g&&(g.disconnect(),g=null)},me=()=>{if(!d.value){C();return}typeof window>"u"||!("IntersectionObserver"in window)||(C(),g=new IntersectionObserver(e=>{e.length&&e[0].isIntersecting&&fe()},{root:null,rootMargin:"200px",threshold:.1}),F.value&&g.observe(F.value))},L=async()=>{if(!d.value||!_.value){C();return}await se(),me()},ee=e=>{e.target.closest(".sort-wrapper")||(y.value=!1)};return we(async()=>{window.addEventListener("resize",J),document.addEventListener("click",ee),ue(),H(n.query),X(),Y(),b({reset:!0}),await se(),L()}),ke(()=>{window.removeEventListener("resize",J),document.removeEventListener("click",ee),C()}),T(()=>[n.query.keyword,n.query.themeIds,n.query.min,n.query.max,n.query.minPrice,n.query.maxPrice,n.query.guestCount,n.query.checkin,n.query.checkout,n.query.sort],()=>{H(n.query),X(),Y(),b({reset:!0})}),T(()=>_.value,()=>{L()}),T(()=>F.value,()=>{L()}),T(()=>d.value,e=>{e?L():C()}),(e,t)=>(r(),l("main",Ee,[a("div",Re,[k.value.length>0?(r(),l("h1",$e,"ê²€ìƒ‰ê²°ê³¼ "+E(Z.value)+"ê±´",1)):(r(),l("h1",ze,"ìˆ™ì†Œ ëª©ë¡"))]),a("div",{class:"fixed-btns",onClick:t[1]||(t[1]=xe(()=>{},["stop"]))},[a("div",Ge,[a("button",{class:"sort-btn",onClick:re},[a("span",Be,E(oe.value),1),a("span",{class:U(["sort-arrow",{open:y.value}])},"â–¼",2)]),y.value?(r(),l("div",De,[(r(),l(R,null,j(z,s=>a("button",{key:s.value,class:U(["sort-option",{active:p.value===s.value}]),onClick:c=>ne(s.value)},E(s.label),11,Ne)),64))])):I("",!0)]),a("button",{class:"filter-btn",onClick:t[0]||(t[0]=s=>w.value=!w.value)},[...t[5]||(t[5]=[a("span",{class:"icon"},"ðŸ”",-1),Ce("í•„í„°",-1)])])]),k.value.length>0?(r(),l("div",We,[(r(!0),l(R,null,j(k.value,s=>(r(),Ie(Ae,{key:s.id,id:s.id,title:s.title,description:s.description,rating:s.rating,"review-count":s.reviewCount,location:s.location,price:s.price,"image-url":s.imageUrl,"is-favorite":v.value.has(s.id),onToggleFavorite:ce,onClick:c=>ve(s.id),class:"list-item"},null,8,["id","title","description","rating","review-count","location","price","image-url","is-favorite","onClick"]))),128))])):!m.value&&k.value.length===0?(r(),l("div",Ke,[...t[6]||(t[6]=[a("div",{class:"empty-icon-wrapper"},[a("span",{class:"empty-icon"},"ðŸ§")],-1),a("h2",{class:"empty-title"},"ì¡°ê±´ì— ë§žëŠ” ìˆ™ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”",-1),a("p",{class:"empty-description"},[a("span",null,"ì ìš©í•œ í•„í„°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜"),a("span",null,"ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¡œ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.")],-1)])])):I("",!0),d.value&&_.value?(r(),l("div",{key:2,ref_key:"loadMoreTrigger",ref:F,class:"list-footer list-footer--observer"},[h.value?(r(),l("span",Ve,"ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...")):I("",!0)],512)):I("",!0),!d.value&&f.value>1&&k.value.length>0?(r(),l("div",Ue,[a("button",{type:"button",class:"page-btn nav",disabled:u.value===0,onClick:t[2]||(t[2]=s=>G(u.value-1))}," ì´ì „ ",8,je),a("div",He,[(r(!0),l(R,null,j(ye.value,s=>(r(),l(R,{key:`page-${s}`},[s==="ellipsis"?(r(),l("span",Qe,"â€¦")):(r(),l("button",{key:1,type:"button",class:U(["page-btn number",{active:s===u.value+1}]),"aria-current":s===u.value+1?"page":null,onClick:c=>G(s-1)},E(s),11,Ze))],64))),128))]),a("button",{type:"button",class:"page-btn nav",disabled:!_.value,onClick:t[3]||(t[3]=s=>G(u.value+1))}," ë‹¤ìŒ ",8,Je)])):I("",!0),a("div",{class:"map-btn-wrapper"},[a("button",{class:"map-floating-btn",onClick:pe},[...t[7]||(t[7]=[a("span",{class:"text"},"ì§€ë„ì—ì„œ ë³´ê¸°",-1)])])]),_e(Fe,{"is-open":w.value,"current-min":$(o).minPrice,"current-max":$(o).maxPrice,"current-themes":$(o).themeIds,"current-guest-count":$(o).guestCount,onClose:t[4]||(t[4]=s=>w.value=!1),onApply:de},null,8,["is-open","current-min","current-max","current-themes","current-guest-count"])]))}},ut=he(Ye,[["__scopeId","data-v-bde7e57a"]]);export{ut as default};
========
import{_ as he,u as ge,r as i,q as O,b as we,s as be,v as se,x as ke,y as T,c as l,e as a,d as I,m as _e,t as E,z as U,F as R,f as j,A as Ce,n as xe,p as $,k as qe,o as r,l as Ie,i as Pe}from"./index-DunUV3Ya.js";import{G as Ae}from"./GuesthouseCard-B5wR-YSs.js";import{F as Fe}from"./FilterModal-DbBC3Pg1.js";import{s as Le}from"./list-Bc-zWvfu.js";import{u as Me}from"./useListingFilters-BSdPZFU2.js";import{f as Se,r as Oe,a as Te}from"./wishlist-FXd2nLQB.js";import"./theme-CH8NxBMC.js";const Ee={class:"container main-content"},Re={class:"header"},$e={key:0},ze={key:1},Ge={class:"sort-wrapper"},Be={class:"sort-label"},De={key:0,class:"sort-dropdown"},Ne=["onClick"],We={key:0,class:"list-container"},Ke={key:1,class:"empty-state"},Ve={key:0,class:"load-more-status"},Ue={key:3,class:"list-pagination"},je=["disabled"],He={class:"page-list"},Qe={key:0,class:"page-ellipsis"},Ze=["aria-current","onClick"],Je=["disabled"],Xe=16,ae=1024,Ye={__name:"List",setup(et){const P=qe(),n=be(),o=ge(),{applyRouteFilters:H,buildFilterQuery:Q}=Me(),A=i([]),v=i(new Set),u=i(0),f=i(1),Z=i(0),m=i(!1),h=i(!1),F=i(null);let g=null;const d=i(typeof window<"u"?window.innerWidth<ae:!1),J=()=>{d.value=window.innerWidth<ae},w=i(!1),z=[{value:"recommended",label:"ì¶”ì²œìˆœ"},{value:"reviews",label:"ë¦¬ë·° ë§Žì€ìˆœ"},{value:"rating",label:"í‰ì  ë†’ì€ìˆœ"},{value:"priceHigh",label:"ê°€ê²© ë†’ì€ìˆœ"},{value:"priceLow",label:"ê°€ê²© ë‚®ì€ìˆœ"}],p=i("recommended"),y=i(!1),oe=O(()=>z.find(t=>t.value===p.value)?.label||"ì¶”ì²œìˆœ"),re=()=>{y.value=!y.value},ne=e=>{p.value!==e&&P.replace({query:{...n.query,sort:e}}),y.value=!1},le=e=>{const t=e.accommodationsId??e.accommodationId??e.id,s=e.accommodationsName??e.accommodationName??e.title??"",c=e.shortDescription??e.description??"",B=e.rating??null,D=e.reviewCount??e.review_count??null,N=[e.city,e.district,e.township].filter(Boolean).join(" "),M=Number(e.minPrice??e.price??0),W=e.imageUrl||"https://placehold.co/400x300",x=Number(e.maxGuests??e.capacity??e.maxGuest??0),K=Number.isFinite(x)?x:0;return{id:t,title:s,description:c,rating:B,reviewCount:D,location:N,price:M,imageUrl:W,maxGuests:K}},ie=()=>{const e=n.query.keyword;return Array.isArray(e)?e[0]??"":e??""},X=()=>{const e=ie();e!==o.keyword&&o.setKeyword(e)},Y=()=>{const e=n.query.sort;e&&z.some(t=>t.value===e)?p.value=e:p.value="recommended"},ue=async()=>{try{const e=await Se();e.status===200&&Array.isArray(e.data)&&(v.value=new Set(e.data))}catch(e){console.error("Failed to load wishlist",e)}},ce=async e=>{if(!Pe()){confirm(`ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤.
ë¡œê·¸ì¸ íŽ˜ì´ì§€ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)&&P.push("/login");return}if(v.value.has(e)){v.value.delete(e);try{await Oe(e)}catch(s){v.value.add(e),console.error(s)}}else{v.value.add(e);try{await Te(e)}catch(s){v.value.delete(e),console.error(s)}}},b=async({themeIds:e=o.themeIds,keyword:t=o.keyword,checkin:s=o.startDate,checkout:c=o.endDate,guestCount:B=o.guestCount,minPrice:D=o.minPrice,maxPrice:N=o.maxPrice,page:M=0,sort:W=p.value,reset:x=!1,appendData:K=!0}={})=>{if(!(m.value||h.value)){x?(m.value=!0,u.value=0):h.value=!0;try{const q=await Le({themeIds:e,keyword:t,checkin:s,checkout:c,guestCount:B,minPrice:D,maxPrice:N,page:M,size:Xe,sort:W});if(q.ok){const V=q.data,te=(Array.isArray(V?.items)?V.items:[]).map(le);x||!K?A.value=te:A.value=[...A.value,...te];const S=V?.page;S&&(u.value=S.number??M,f.value=S.totalPages??f.value,Z.value=S.totalElements??0)}else console.error("Failed to load list",q.status)}catch(q){console.error("Failed to load list",q)}finally{m.value=!1,h.value=!1}}},k=O(()=>A.value),de=({min:e,max:t,themeIds:s=[],guestCount:c=1})=>{o.setPriceRange(e,t),o.setThemeIds(s),o.setGuestCount(c),w.value=!1,b({themeIds:s,reset:!0})},ve=e=>{if(!e)return;const t={from:"list",sort:p.value,...Q()};P.push({path:`/room/${e}`,query:t})},pe=()=>{P.push({path:"/map",query:{...Q(),from:"list"}})},_=O(()=>u.value+1<f.value),fe=()=>{if(!d.value||!_.value||m.value||h.value)return;const e=u.value+1;b({page:e,appendData:!0})},G=e=>{if(d.value)return;const t=Math.min(Math.max(e,0),f.value-1);t!==u.value&&(b({page:t,reset:!1,appendData:!1}),window.scrollTo({top:0,behavior:"smooth"}))},ye=O(()=>{const e=f.value,t=u.value+1;return e<=5?Array.from({length:e},(s,c)=>c+1):t<=2?[1,2,3,"ellipsis",e]:t===3?[1,2,3,4,"ellipsis",e]:t>=e-1?[1,"ellipsis",e-2,e-1,e]:[1,"ellipsis",t-1,t,t+1,"ellipsis",e]}),C=()=>{g&&(g.disconnect(),g=null)},me=()=>{if(!d.value){C();return}typeof window>"u"||!("IntersectionObserver"in window)||(C(),g=new IntersectionObserver(e=>{e.length&&e[0].isIntersecting&&fe()},{root:null,rootMargin:"200px",threshold:.1}),F.value&&g.observe(F.value))},L=async()=>{if(!d.value||!_.value){C();return}await se(),me()},ee=e=>{e.target.closest(".sort-wrapper")||(y.value=!1)};return we(async()=>{window.addEventListener("resize",J),document.addEventListener("click",ee),ue(),H(n.query),X(),Y(),b({reset:!0}),await se(),L()}),ke(()=>{window.removeEventListener("resize",J),document.removeEventListener("click",ee),C()}),T(()=>[n.query.keyword,n.query.themeIds,n.query.min,n.query.max,n.query.minPrice,n.query.maxPrice,n.query.guestCount,n.query.checkin,n.query.checkout,n.query.sort],()=>{H(n.query),X(),Y(),b({reset:!0})}),T(()=>_.value,()=>{L()}),T(()=>F.value,()=>{L()}),T(()=>d.value,e=>{e?L():C()}),(e,t)=>(r(),l("main",Ee,[a("div",Re,[k.value.length>0?(r(),l("h1",$e,"ê²€ìƒ‰ê²°ê³¼ "+E(Z.value)+"ê±´",1)):(r(),l("h1",ze,"ìˆ™ì†Œ ëª©ë¡"))]),a("div",{class:"fixed-btns",onClick:t[1]||(t[1]=xe(()=>{},["stop"]))},[a("div",Ge,[a("button",{class:"sort-btn",onClick:re},[a("span",Be,E(oe.value),1),a("span",{class:U(["sort-arrow",{open:y.value}])},"â–¼",2)]),y.value?(r(),l("div",De,[(r(),l(R,null,j(z,s=>a("button",{key:s.value,class:U(["sort-option",{active:p.value===s.value}]),onClick:c=>ne(s.value)},E(s.label),11,Ne)),64))])):I("",!0)]),a("button",{class:"filter-btn",onClick:t[0]||(t[0]=s=>w.value=!w.value)},[...t[5]||(t[5]=[a("span",{class:"icon"},"ðŸ”",-1),Ce("í•„í„°",-1)])])]),k.value.length>0?(r(),l("div",We,[(r(!0),l(R,null,j(k.value,s=>(r(),Ie(Ae,{key:s.id,id:s.id,title:s.title,description:s.description,rating:s.rating,"review-count":s.reviewCount,location:s.location,price:s.price,"image-url":s.imageUrl,"is-favorite":v.value.has(s.id),onToggleFavorite:ce,onClick:c=>ve(s.id),class:"list-item"},null,8,["id","title","description","rating","review-count","location","price","image-url","is-favorite","onClick"]))),128))])):!m.value&&k.value.length===0?(r(),l("div",Ke,[...t[6]||(t[6]=[a("div",{class:"empty-icon-wrapper"},[a("span",{class:"empty-icon"},"ðŸ§")],-1),a("h2",{class:"empty-title"},"ì¡°ê±´ì— ë§žëŠ” ìˆ™ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”",-1),a("p",{class:"empty-description"},[a("span",null,"ì ìš©í•œ í•„í„°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜"),a("span",null,"ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¡œ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.")],-1)])])):I("",!0),d.value&&_.value?(r(),l("div",{key:2,ref_key:"loadMoreTrigger",ref:F,class:"list-footer list-footer--observer"},[h.value?(r(),l("span",Ve,"ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...")):I("",!0)],512)):I("",!0),!d.value&&f.value>1&&k.value.length>0?(r(),l("div",Ue,[a("button",{type:"button",class:"page-btn nav",disabled:u.value===0,onClick:t[2]||(t[2]=s=>G(u.value-1))}," ì´ì „ ",8,je),a("div",He,[(r(!0),l(R,null,j(ye.value,s=>(r(),l(R,{key:`page-${s}`},[s==="ellipsis"?(r(),l("span",Qe,"â€¦")):(r(),l("button",{key:1,type:"button",class:U(["page-btn number",{active:s===u.value+1}]),"aria-current":s===u.value+1?"page":null,onClick:c=>G(s-1)},E(s),11,Ze))],64))),128))]),a("button",{type:"button",class:"page-btn nav",disabled:!_.value,onClick:t[3]||(t[3]=s=>G(u.value+1))}," ë‹¤ìŒ ",8,Je)])):I("",!0),a("div",{class:"map-btn-wrapper"},[a("button",{class:"map-floating-btn",onClick:pe},[...t[7]||(t[7]=[a("span",{class:"text"},"ì§€ë„ì—ì„œ ë³´ê¸°",-1)])])]),_e(Fe,{"is-open":w.value,"current-min":$(o).minPrice,"current-max":$(o).maxPrice,"current-themes":$(o).themeIds,"current-guest-count":$(o).guestCount,onClose:t[4]||(t[4]=s=>w.value=!1),onApply:de},null,8,["is-open","current-min","current-max","current-themes","current-guest-count"])]))}},ut=he(Ye,[["__scopeId","data-v-dd5a272d"]]);export{ut as default};
>>>>>>>> develop:backend/src/main/resources/static/assets/List-LNjRmf1p.js
