import{_ as q,r as t,b as I,s as E,c as l,e,d as c,t as d,C as V,E as G,w as x,A as N,N as H,m as L,G as B,I as A,a as D,n as T,O as $,k as P,o as n,z as F}from"./index-CdO51RKj.js";const U={class:"login-page"},W={class:"login-container"},O={class:"login-form"},j={key:0,class:"info-message"},J={key:1,class:"error-message"},Q={class:"input-group"},X={class:"input-wrapper"},Y={class:"input-wrapper"},Z=["type"],ss={key:0,class:"warning-icon"},es={key:0,class:"password-error-text"},os=["disabled"],ts={class:"find-links"},as={class:"social-login"},ls={class:"modal-content"},ns={key:0},is={key:1},rs={key:2},ds={class:"modal-message"},us={__name:"LoginView",setup(vs){const p=P(),u=E(),g=t(""),f=t(""),h=t(!1),k=t(!1),i=t(""),v=t(""),m=t("");I(()=>{u.query.unauthorized&&(m.value="서비스 이용을 위해 로그인이 필요합니다.")});const y=t(!1),M=t(""),b=t("info"),w=t(null),K=(o,s="info",a=null)=>{M.value=o,b.value=s,w.value=a,y.value=!0},z=()=>{y.value=!1,w.value&&(w.value(),w.value=null)},R=()=>{h.value=!h.value},_=async()=>{if(i.value="",v.value="",m.value="",!f.value){i.value="비밀번호를 입력해주세요.";return}g.value,k.value=!0;try{const o=await $(g.value,f.value);if(o.ok&&o.data){const s=o.data.role,a=typeof u.query.redirect=="string"?u.query.redirect:"";sessionStorage.removeItem("postLoginRedirect"),s==="ADMIN"?p.push("/admin"):a.startsWith("/")?p.push(a):p.push("/")}else v.value="이메일 또는 비밀번호를 잘못 입력하셨거나 등록 되지 않은 이메일입니다."}catch(o){console.error("로그인 에러:",o),v.value="로그인 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요."}finally{k.value=!1}},C=o=>{const s=typeof u.query.redirect=="string"?u.query.redirect:"";s.startsWith("/")?sessionStorage.setItem("postLoginRedirect",s):sessionStorage.removeItem("postLoginRedirect");const a={Google:"/oauth2/authorization/google",Kakao:"/oauth2/authorization/kakao",Naver:"/oauth2/authorization/naver"};o==="Naver"||o==="Google"||o==="Kakao"?window.location.href=a[o]:K(`${o} 로그인은 준비 중입니다.`,"info")},S=()=>{p.push("/register")};return(o,s)=>{const a=A("router-link");return n(),l("div",U,[e("div",W,[s[13]||(s[13]=e("div",{class:"login-header"},[e("h1",null,"환영합니다"),e("p",null,"로그인하여 서비스를 이용하세요")],-1)),e("div",O,[m.value?(n(),l("div",j,d(m.value),1)):c("",!0),v.value?(n(),l("div",J,d(v.value),1)):c("",!0),e("div",Q,[s[5]||(s[5]=e("label",null,"이메일",-1)),e("div",X,[V(e("input",{type:"email","onUpdate:modelValue":s[0]||(s[0]=r=>g.value=r),placeholder:"이메일을 입력하세요",onKeyup:x(_,["enter"])},null,544),[[G,g.value]])])]),e("div",{class:N(["input-group",{error:i.value}])},[s[6]||(s[6]=e("label",null,"비밀번호",-1)),e("div",Y,[V(e("input",{type:h.value?"text":"password","onUpdate:modelValue":s[1]||(s[1]=r=>f.value=r),placeholder:"비밀번호를 입력하세요",onKeyup:x(_,["enter"])},null,40,Z),[[H,f.value]]),i.value?(n(),l("span",ss,"!")):c("",!0),e("button",{class:"toggle-btn",onClick:R},d(h.value?"숨김":"보기"),1)]),i.value?(n(),l("div",es,d(i.value),1)):c("",!0)],2),e("button",{class:"login-btn",onClick:_,disabled:k.value},d(k.value?"로그인 중...":"로그인"),9,os),e("div",ts,[L(a,{to:"/find-email",class:"find-link"},{default:B(()=>[...s[7]||(s[7]=[F("이메일 찾기",-1)])]),_:1}),s[9]||(s[9]=e("span",{class:"link-divider"},"|",-1)),L(a,{to:"/find-password",class:"find-link"},{default:B(()=>[...s[8]||(s[8]=[F("비밀번호 찾기",-1)])]),_:1})])]),s[14]||(s[14]=e("div",{class:"divider"},[e("span",null,"또는")],-1)),e("div",as,[e("button",{class:"social-btn google-btn",onClick:s[2]||(s[2]=r=>C("Google"))},[...s[10]||(s[10]=[D('<svg class="social-icon" viewBox="0 0 24 24" width="20" height="20" data-v-b852d36e><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-b852d36e></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-b852d36e></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-b852d36e></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-b852d36e></path></svg><span data-v-b852d36e>Google로 시작하기</span>',2)])]),e("button",{class:"social-btn kakao-btn",onClick:s[3]||(s[3]=r=>C("Kakao"))},[...s[11]||(s[11]=[e("svg",{class:"social-icon",viewBox:"0 0 24 24",width:"20",height:"20"},[e("path",{fill:"#000000",d:"M12 3C6.48 3 2 6.48 2 10.8c0 2.7 1.68 5.1 4.26 6.54-.18.66-.84 2.94-.96 3.36-.15.54.18.54.42.39.18-.12 2.94-1.98 3.42-2.34.54.06 1.08.12 1.86.12 5.52 0 10-3.48 10-7.8S17.52 3 12 3z"})],-1),e("span",null,"Kakao로 시작하기",-1)])]),e("button",{class:"social-btn naver-btn",onClick:s[4]||(s[4]=r=>C("Naver"))},[...s[12]||(s[12]=[e("svg",{class:"social-icon",viewBox:"0 0 24 24",width:"20",height:"20"},[e("path",{fill:"#FFFFFF",d:"M16.273 12.845L7.376 0H0v24h7.726V11.156L16.624 24H24V0h-7.727v12.845z"})],-1),e("span",null,"Naver로 시작하기",-1)])])]),e("div",{class:"signup-link"},[e("span",{onClick:S},"회원가입")])]),y.value?(n(),l("div",{key:0,class:"modal-overlay",onClick:T(z,["self"])},[e("div",ls,[e("div",{class:N(["modal-icon",b.value])},[b.value==="success"?(n(),l("span",ns,"✓")):b.value==="error"?(n(),l("span",is,"!")):(n(),l("span",rs,"i"))],2),e("p",ds,d(M.value),1),e("button",{class:"modal-btn",onClick:z},"확인")])])):c("",!0)])}}},ps=q(us,[["__scopeId","data-v-b852d36e"]]);export{ps as default};
